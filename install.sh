#!/usr/bin/env bash

# TFC - Onion-routed, endpoint secure messaging system
# Copyright (C) 2013-2023  Markus Ottela
#
# This file is part of TFC.
#
# TFC is free software: you can redistribute it and/or modify it under the terms
# of the GNU General Public License as published by the Free Software Foundation,
# either version 3 of the License, or (at your option) any later version.
#
# TFC is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
# without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
# PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with TFC. If not, see <https://www.gnu.org/licenses/>.

# Installer configuration

INSTALL_DIR="/opt/tfc"


# ----------------------------------------------------------------------------------------

# PIP dependency file hashes
declare -A dependency_hashes
dependency_hashes['appdirs-1.4.4-py2.py3-none-any.whl']='8e6c1ea544013ea2567cda2d8b8c7b441bc50ac689aa7f95de67e3795aa083e9592c687d74fdbb37f5a75e0beab398fe47df5bced14ee9c204cfe5ecc364ef44'
dependency_hashes['appdirs-1.4.4.tar.gz']='8b0cdd9fd471d45b186aa47607691cf378dabd3edc7b7026a57bd6d6f57698e86f440818a5e23ba4288b35d6bb8cb6eb0106eae8aab09d8863ee15025d300883'
dependency_hashes['argon2_cffi-21.3.0-py3-none-any.whl']='3093f5ae0220dc4c85f741dcd413ba8b19e8b91be7d253c7f2548a1ec9ec99298b2ce7d809be16f497323ffc6733acd35eb201fadd6d91560e41901ed3c09da9'
dependency_hashes['argon2-cffi-21.3.0.tar.gz']='6cb2a075f3bb7040ee7f552d082bfa2f3df0854649d9c84fdfdb42bb4bee2133b8a35a20be2b3c887931efda12fbbb00815d8d88170b7e20b3ca19c86f97057e'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='c3218d723db5c8f2dbc9c737a3ce24d52291a8056b855c6e988956821894b695f2afd50b189a581e9cb5a5d1c13b9b1144be9fb6296a62681b209412caf85b42'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='7a77d7e0becc167b7b348b19d5fc65e25fea4dd93a8e26c203b39f88691515a756a78becfb665a4aa965112a9b561be6c4461fe38db422fe20198b3139d652ff'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='1bd48d7a11cb99cc0d8526b2dc156e025002092d1f7c60632a0470275ade2374d3be6138ecf924eae2c33fb5d29fef16729b710294cc0b8f35f50a7544d17cc5'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-musllinux_1_1_aarch64.whl']='c1f3ede9138689922619a240242a9d11aaf5942058c896be8ddce517d3ebf386767804e93d9dc4055ad04c682560764e9020c87f96f0d949a36e758025d09fe1'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-musllinux_1_1_i686.whl']='ddb220ba4de3b61cefb657776d64ea0351e89b1f6e2eb04664e024f3e0dc46f1cdb11159b79f8cb9d0530c3dbc4bcfb9d89234fff567d53b06e0564ffa46afea'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-musllinux_1_1_x86_64.whl']='96c611449056eccf03f2e2cb5f8b6353ddd9f852c607f2fc6cda5f13bf8f8d554f2679b6c221b2114ff0b3ae5cb9ba841a7fc1affde840f5dcda65eb9c319d83'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp37-pypy37_pp73-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='7097f92df079b66b1d59b699523e2a87f2864e1e3c59bc2a4c71cf5657e6f3b094c62e626009602d1c44f07b5e1f2fc79ab03e916475cde07b6b6c6494e7388d'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp37-pypy37_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='d8556d123fb96046837c6eb9205cb9fdb817f5ec6aa482f9f6ded77a3e67f1b49a21e1273acc0fcbaed7f4bf46b34fd555ec085ffc9a2daea1345186444f7c7c'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp37-pypy37_pp73-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='8940ebaa9466f7810e385d0721042ae9c117480cc659436cd903b5c37af02fd9c9dce8d5ed95fb45ef7305777445cdb8fb00c82671bd577e1eeaf81f2691ae8d'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp38-pypy38_pp73-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='9c77fbaecb073de920ed570cb7c7956a04c904e7e9616badde275791048a487fcd7e85eb6bf79d3f6bba6fdbc398e32cc208bda8fe368a84897b8d35da8e6bbd'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp38-pypy38_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='74f931f3262333e3451295075abbfe0c323beadad36ffe73b65143e906f1e8cab924601a56a3f184ca2516fedcb69dc7d8dc6ea1d0ba25bccb21476a89bc46d8'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp38-pypy38_pp73-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='740c76d800bf8bea95f800457ef03d4125b262d034e4a62e66615144a8abe35950b37fe5627553e5bc448ffe32f77ebeee5e2a04857409f53604fb30de7d8d72'
dependency_hashes['argon2-cffi-bindings-21.2.0.tar.gz']='71d023ae96073ed78599e4f4e42f8efcc985cc329adeea00b14b54eaac1e6a545e6ad9b7f4cfdc60a4e9c396f95053c0ccb6f6f67d92f70265f91315fff4a390'
dependency_hashes['backports.entry_points_selectable-1.2.0-py3-none-any.whl']='758fa1b7ef45b8ebbbfb39996678a3edc5081d2fc6732afc7de790065d5a8e0611b466b93972ae53852d96eb3e62647e9f6f1aea5cf88dcfbde0a7c77557de6d'
dependency_hashes['backports.entry_points_selectable-1.2.0.tar.gz']='de2ff8d5ec54369c8847d4975fd8666f64ca7689aed2c05b7bbe9f1bc1c3816b527786410bd36f6c337e6b57bc04e714e5f77a301828049fa290b65c474c2825'
dependency_hashes['certifi-2022.12.7-py3-none-any.whl']='a7d259277af4948bf960682bc9fb45a44b9ae9a19763c8a7c313cef4aa9ec2d447d843e4a7c409e9312c8c8f863a24487a8ee4ffa6891e9b1c4e111bb4723861'
dependency_hashes['certifi-2022.12.7.tar.gz']='fd08b6bf138aa1b0a47909077642713d80f036e4b18de2c7f236a185521db3d6498a81a60b150124cc4bc21dd7e687badad4324a898117060c9e4ec93dfbdbe8'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='160432f1765330dab76807ec42052cf41cf33922f7b77713aeac0f99af1da8107f1cee85fdc2d13db620a8d21c24423853dd55936204109e429331828e2c576c'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='2c125d6b2cbfca5b3174095a6fe653fa2c58762aca9a9c46024d50ae104acdf10ddac2014ccad58ba95dbe3c4c8c2589a26292f23a28c1ffafb9aff4d60878dd'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='73eb0ea04f5f3c1e9e12a07cdb01b2095f7eb329aaaf9686c40087d8e59944acf4d616b6f774139593de176945ceb510fa86fa546d165bd0a2e8c378c23ad552'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_17_s390x.manylinux2014_s390x.whl']='49ef4f829cd9b8e29964b2e0a96a05f8230a510a6ef78b3f5ad10a04e17f4a6356955325be23d2e770518d6439613ebd3e851874a5c3d0e9831018fdd60fde2c'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='35399df0a0ae1e10699d743e11104f0340a3d99621874cbb33594449653baf99b9ba4d633005165d7e70a2282bc46924e08ce4d7e60d17cd1fa30d0b37da9543'
dependency_hashes['cffi-1.15.1-cp310-cp310-musllinux_1_1_i686.whl']='2f75e683e617abbf709328ea6500d4d688078e378f5447fd923f7ec9d1722a9a38292061b762098177d0e12b221437c8970bb8a96b0423c3b55f5c2471f71634'
dependency_hashes['cffi-1.15.1-cp310-cp310-musllinux_1_1_x86_64.whl']='6cb0451be3df9a5d38b26ce6125d6f924811ccc49e6d7019835d7de9a8524cf8764f852fe688d085610d15b6feedec196d00edad862264b3a06d755f58586483'
dependency_hashes['cffi-1.15.1-cp311-cp311-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='9569fe3f3af46c7e19b1bca00684856825bb663adf2cf669980b7c003535d278e05b53ddf85004dae01ab7ec582e721a2c8c6087612da438d0445bfd4ac1a241'
dependency_hashes['cffi-1.15.1-cp311-cp311-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='04fb957a7e40d10461e290b631aeaa02eb9a304ae0397ea5948fdb9de3c8376e2030385fb5bc5696b618659022250bc9a69c4f1b8ef1e637431fbb5d23b26aec'
dependency_hashes['cffi-1.15.1-cp311-cp311-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='d993a2f25c194c16c981583c86ee9de5374cec0602da6f681f655a18c92c51133babbca0c802d02f330009ccab5040bc0e4f7a4cb5cbb05eafa744e93f5c9c3d'
dependency_hashes['cffi-1.15.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='c27677ab98eccac495e34e912c5626eed909b72bf8d21493a3c00bfaaec0af7847d91a97fcc5d2834305e6c3b64fb2e4d84c83f7b6dc27b6a165c9f42bb5ab08'
dependency_hashes['cffi-1.15.1-cp311-cp311-musllinux_1_1_i686.whl']='9911acb9878bbc8c59734839c8cbc164e8f121a493a0589898e1b16df32c41d46d0132ac3a8a36d52cd2f0d857695a8cc6878b5cf6607fb52fad139a43089d66'
dependency_hashes['cffi-1.15.1-cp311-cp311-musllinux_1_1_x86_64.whl']='a8cd7b5b695cb89556a7b5c0d4f7d02325d39cd59bade9e6828717623c98c4a4fd5561366549770fc8e412aba06dd5c0cdb5934a49050d182bc27d0a8b4d5601'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='fde7e4cc649538a32c87bd40cc6f5596d79566c6508e2fa7c30241d68d7bbd51d22b50039910c5a5196f10f4c9d499eeb884367156f156dc8285fc3a1ac103a4'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='0c9980b8f05e7105832ab5e481432f778a09631ce0fd1c09b9582a19f2b08ebd666b491ca97bb718a74feb80d3516998e3f112871ad2838fd4256e7a8eb39ebb'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_17_s390x.manylinux2014_s390x.whl']='d372560553196445c3152b92f4afa011f61aa768825dd63b8ac8b9142481b1b86c97f6f683a92ae0a25e409503ff4ef159c74185dbbfe2a54b22426d9ca991f7'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_5_i686.manylinux1_i686.whl']='9cf0bc15c1d820e45578943222655cc8db8416e01ee825c9b107963174b20f0a0b01fd8277c28d918bcf18eeb5f45de9c1a935210f9c0a2daa5b62f70d747a45'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.whl']='bf4d6ed94fda20aa7760d2a7f0c1557ddd70dc90a2f0b2dd391bd274d37f09e298b83ff014e6f0820c6b47e70681db94a4197016bc33b89e01f9223f23403988'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='862d68482073f468f60d8f093a9f9b5c78562297f2eb36c84bce283a4a00e897d1731aef67b12b17551e373a668288acd32dcd49031fed5a8c621aa8c41fb0b4'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='36160d9d7c2f138b3cc1debe96365d57b0d204dac9cd7732ee6ab8890d9fc87700a50475336d79d60b26c1656295e26d27998cc3f9f6274613c84a64144c93b0'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='55ea36458d5c3c4a6f9b647215676fe8801704c6facdb65c55f445b4069ed3fdaf155daa8e371ed9f27937f57799e189f7402b945ec70bb85eaaa2f643c70945'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_17_s390x.manylinux2014_s390x.whl']='bb85c0f097eb69d218498dd07f4a40d5bbe280b11062babe64b8d3b9a0df540c42d95e898ee409b14daefdf19c48bc499cec6bb69295d7b6a10dc151fdd6bb6c'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='e253ae455ca94f91ee37038c225d395b5668e26772edf26de226ccbb347c3c1b5536a358e023779fc1b06bb6c5717158d6262855445804b1206e07da3a596c7e'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='454522b8eef53c0d17a5eb24a8852f5d6d8360aca2a2c5cc8fca22533de548052ac4556c7cde432592b20f63cec0356be423a4a964ad046744e018821aee4ca5'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='f529bc89cee24cc8db6888df904f5c2bc6a6ee9b0cd52ad03493918936079875fc0968a3f5f1e93306a41e6418d3e60b2b1417c287fc29d0c12951caa0b94b98'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='2b0fba3366eaaf1a88701c5131fe6318e3c89c2969afed5fd2fffdcaea1810b91963dec37b549795267577a4f1697996846e8d027b63835e290c72b3568c8269'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_17_s390x.manylinux2014_s390x.whl']='88d1f27641ecbc51d9c323a19c913818c478d4eb87d27d16426d20eb9727d5d4b23bf9551d842433820068e29082c9b9c2654f38e903b6fc761d70632731c643'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='7d21ff025e620b024191e0a813a678b3269b582e61944e5677eef4bd94be8456758515288d48b85b3736efb84b9d0d899d60bbf8c5d9e79f943c2b1f2f78f85d'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='c76d6e2f761582c4122cec8ecb302fca324b90fdb3ad1442dfd32ab8cee25c6e0519c6556911d5d068229d48578f8c1cdcad4fdfe8bf936ed6038d020633a3e7'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='7866aba126d54d88a0e55c70fc8587773fa1926db1f09c932b58489a63092b2e672f8bd3104d682bf41f250dfce85a824b2616b9f2cf796e020b1ddaabaacf4f'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='228a40447e3cdf4bebec7286d8c53139f4dea816be3b378dec81ba5e0bb1c20a938564b0b6d34780399f79fce3ba572a5fb5e93dd21dc536551323290ff2483c'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_17_s390x.manylinux2014_s390x.whl']='c637580d319c9960185f44580932996c2554fb0e549d822f636a9703a8e9b8f6e105d765b65e1ef7411320698d05a60f4005b3d590e18c5784d5c8d07d86f612'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='95bd8ee4ac5d3f4cb09d5d223dfec484cfc90b82e2eabe40eb3c89217b0f315bee469dee6c5f89bb02e636eefade048e6e709f2b5126eeb634dcb0cb13332fa6'
dependency_hashes['cffi-1.15.1-cp39-cp39-musllinux_1_1_i686.whl']='f5ea1c8a22ed5bfe03586d7fa872dc0bdeaa13ee310ecfd7355ca2a3f742ac6e3b3e2663399acb4220c95cdb92521dc181fd9c7d9da1ce45817a145500cd9243'
dependency_hashes['cffi-1.15.1-cp39-cp39-musllinux_1_1_x86_64.whl']='0fab1b5323e009dd41de28f3f5c9f01dd4ceea627de8bb6244f72394c3fbae6dca8dc65909dce4847cbf8fd3654b55b55caa194672652a253bd0fa2a1b112f78'
dependency_hashes['cffi-1.15.1.tar.gz']='e99cafcb029076abc29e435b490fa0573ee2856f4051b7ca8a5b38cd125d56dd9dae8b189f59ceb3d728a675da8ee83239e09e19f8b0feeddea4b186ab5173a5'
dependency_hashes['chardet-5.1.0-py3-none-any.whl']='dea812a519d24ee8214cc8188e427e45d4624c115ba1a6ab70711882e033fc138d2c2b71b96a5e8223399a5d2d7c8104610f79a04fa264675c8c40b217aab690'
dependency_hashes['chardet-5.1.0.tar.gz']='f4e668de1d6f8fe0223d79a150123b99875cc5e2015e2b6c4052c1c545c044f1a3aba1c02eba3c295c0a1795e24302f5304500321dca8f1e8c0605d08ef8bb62'
dependency_hashes['charset_normalizer-2.1.1-py3-none-any.whl']='fe2f3ae5d3c011b314a057456a7b13ba957593b22dbe7f532f9fbe077103e75b3f8b631fb1e2a4d5875a60af678b6779780eff7df0ea7c08144aa88fce34abc0'
dependency_hashes['charset-normalizer-2.1.1.tar.gz']='f52abab683ebda4100d67ec6ee0349713baee453a742d60a1356f405c5ce2c3b4d850b0891527f08f92fa1217d59c46d6b181dc4ff1b962ce60d9c5ef8c913d1'
dependency_hashes['click-8.1.3-py3-none-any.whl']='ce7e25725b3edfd0f336f3ebc8ace3977539f0d063f3439c4a1af517263cc1058cd9c0f687819ba319811dd0f376148372444dbaf082797d1dfe2c1c1c856dfb'
dependency_hashes['click-8.1.3.tar.gz']='be5b0c8b72ef7c10854f31406668ca4d6f826381deff10bb6a87a406166c09af97e2165f1327094d96abade15efb872892af37f20fdbc855b659cb2c7bd2f2c5'
dependency_hashes['cryptography-40.0.2-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='529d42f80f85f84ddb9c4fc16adfde89c8e0861b37dc1aa85e49760034428d48ea2ece1b41bc6d6e28fbe7e6095357df512533391457aa910539baac02b0aeb3'
dependency_hashes['cryptography-40.0.2-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='a629ad9150a00b35e2188837614f9196439b29837420b383b88399905306911f5d11ac970c3ca79a88c53ae0c98aa34892cfceb7ffdac4b965717f3e6afc9abf'
dependency_hashes['cryptography-40.0.2-cp36-abi3-manylinux_2_28_aarch64.whl']='28acceb7b52c3d1a916e99d7fa7ac71f8f7c050bf5a7a24b521f021a442e9cf3ae0fb0471cb92d1ea050a5a323d0b8e9172de965bc2f8398bd68f05d64b31294'
dependency_hashes['cryptography-40.0.2-cp36-abi3-manylinux_2_28_x86_64.whl']='8366a2dda1421823bc835a128b3cc1b4f5ce769da2cbb8a952a82c4823a38fe9a2086e2c1ea1725fb3691928cf0be74ac713bfdd3bcc4d54ae7200801c1dd9e2'
dependency_hashes['cryptography-40.0.2-cp36-abi3-musllinux_1_1_aarch64.whl']='776b6f99749a42707f1ec709fb672d0b2a276cc3888c97e0da804e85d2bb918470acc5eeecd34c9fe46bcb2fbf6410ee7d12ca05c0500c39b5c22bcebb1284e6'
dependency_hashes['cryptography-40.0.2-cp36-abi3-musllinux_1_1_x86_64.whl']='4ecd052e2b6c3376cb751e6bc0f568cdf46619600673ae3967bc3d3a9d9e834f61772e336f29552b0b4ab7023d5b38f5f745188119bf1a29d1b68ca63a497c4e'
dependency_hashes['cryptography-40.0.2-pp38-pypy38_pp73-manylinux_2_28_aarch64.whl']='865cf0bc254d4dd775968fbdb392b4d2d3516a2a345c72ebfd787b6d80cd982b942c7bb932110e81d05c58539b053441ecf76193b03e7600027e1873f2652292'
dependency_hashes['cryptography-40.0.2-pp38-pypy38_pp73-manylinux_2_28_x86_64.whl']='2416924bf5d8ab0d890a2bf11766a5b262fff585b5391342c0ea1935d5ab343abb74a396beda3182298fa45b4971b172ed2793f190b771a676fdd470d3d94224'
dependency_hashes['cryptography-40.0.2-pp39-pypy39_pp73-manylinux_2_28_aarch64.whl']='d70274a507e3533bd368954364016422dddc8db4e3cecd52697afbc9cffe9f41eed77dd9419690fd70b5fc8b573e952eacd8b49db074edb7449f30eeae9d251e'
dependency_hashes['cryptography-40.0.2-pp39-pypy39_pp73-manylinux_2_28_x86_64.whl']='68d656c511deef6ae84e5a5004b7b3ce3c192ea889d61fadc082197ee2ac91454dd4c473587ecc1e2862c8a7948839b15263785bbf026e32d7f208c2bfbb8234'
dependency_hashes['cryptography-40.0.2.tar.gz']='391aba41fa75052d86182d39096c61eb37126a1e94499fe1934cc3307c8c7e819ead0e904c58c0b36fa4c4bc375b092d1b352217bc0d448f4aab587cff90528e'
dependency_hashes['distlib-0.3.6-py2.py3-none-any.whl']='7046ad8707013371b68a805fb437e7f29d883694d6870012f2db197f8bdf472aa262d5e549852c4dbccbd5af5cb0a402d60f8cad845e43df9429a2c437e28187'
dependency_hashes['distlib-0.3.6.tar.gz']='27f3a59f9175a92befb9a65a66cd0b8eb65185dab6fa13ef94e85ca69c2bc1b7281ce1522601034007cb98677ba9237a46224df4adc70ed966db7e131e073636'
dependency_hashes['filelock-3.11.0-py3-none-any.whl']='f9cfb7d50831ba705950593b2e53c9f97f91d3449224bbd74cf257b1fb7b7844141fcc844ed44a5770b1a010f12e0bbc50b4ea36946b95802cce974feabb2068'
dependency_hashes['filelock-3.11.0.tar.gz']='aa95176d3870a8a5bba033e3893bdc8ad61665c64137cfa35fbaff725edea30a4ab4fb70e902387fc5ec359c3c0b101777451a0e96e38522d13df3e95db0e244'
dependency_hashes['Flask-2.2.3-py3-none-any.whl']='39a67e2b05619d4196fbccfbd836be0ed6c4c977beb1696020563433766c089a278ae09957936c7d23a75ca022a90cc719ab7cc3a6fe5a7dac4f687d11568d85'
dependency_hashes['Flask-2.2.3.tar.gz']='de119d032b04eef80a99cee9658cac12f934e9a66d7dbb8304588d0c1320a8a19a8b0a78f69134a20ca26aa408db8686436c5c108ecc39e16b1eca1a3dea2d2c'
dependency_hashes['idna-3.4-py3-none-any.whl']='ffdd45326f4e91c02714f7a944cbcc2fdd09299f709cfa8aec0892053eef0134fb80d9ba3790afd319538a86feb619037cbf533e2f5939cb56b35bb17f56c858'
dependency_hashes['idna-3.4.tar.gz']='4060a9304c9bac04efdd0b97ec8f5aeb7e17417e767bf51c5dfc26605edad25ab67456cf6f6a3c5a9f32b8247e46f6343edfd8a6ffbcd6d1075c71e66d089d6a'
dependency_hashes['importlib_metadata-6.4.1-py3-none-any.whl']='cd5ea0bcfb9f887b0ece80cff9254ae948d11c793b9a201ccea086f790c0c09098c5ec67d7d70f038dd76eceb57df85266013f951afb279664db35ca1ed04b38'
dependency_hashes['importlib_metadata-6.4.1.tar.gz']='925336d321872a01b8c1b6384fa494c912d69531c5c9c991af43b09690a40aa5aaa2e9c6f47345ed8ee7e0d6b632758c4111a5558b5bf1b659b99cad0bae908c'
dependency_hashes['itsdangerous-2.1.2-py3-none-any.whl']='190df7f250b5e5985898a7f0e0e9d4c3d0b5c391268b9b5ad0f39667ec887b543651dff7623ba49e191ffadb42b0354b21be19ef61a1f68193924bf12034dd1d'
dependency_hashes['itsdangerous-2.1.2.tar.gz']='e4d870a33992b309ed778f403c0c1e098983a693d1165260748bf36385ebfadb583811e05ddd48001a33cf6a4e963b7dd8a8c68919c5b4b86f63621d8869e259'
dependency_hashes['Jinja2-3.1.2-py3-none-any.whl']='00558cca2e0ac813d404252f6e5aeacb50546822ecb5d0570228b8ddd29d94e059fbeb6b90393dee5abcddaca1370aca784dc9b095cbb74e980b3c024767fb24'
dependency_hashes['Jinja2-3.1.2.tar.gz']='5dfe122c1beef5305b34d25f22f96607bd3a6cba098b03091850ea36fefe62b645a7218d7584b35bea252393ac922c9bb3654a9e90f23bcfb273e811fcf2f2c1'
dependency_hashes['MarkupSafe-2.1.2-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='3783ca01b1676f4b0f597ead79ab32b5c5fe2810e66a7fde0832b7ca5cc83187cee03c262b2ed04558582585bd0c5deb0c045618feec13edd3e549c14a148098'
dependency_hashes['MarkupSafe-2.1.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='ceba16a2f438216f2eb8312caeb94f827f498f84daa08701607483ddf364ba0fa553b582b4b6a2c26c254bfab25004416d345e3e4f04c3877fcbccabe380e88b'
dependency_hashes['MarkupSafe-2.1.2-cp310-cp310-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='a1964e0a905fece6efa054f6b7dd2c4b89b1b67c8bc80d72ffd4ce7228d389f8f28b4b21036505548d75902a19d764d74929403dea6f61fc7638ef2054b5636c'
dependency_hashes['MarkupSafe-2.1.2-cp310-cp310-musllinux_1_1_aarch64.whl']='282f5396816317eb14f71a012ed33e57c7bb434a367e7a66d126ceeb4091e5f5dca68aa6dbb1d4c1005c80492bfaa3109071872c86b303c2f49f47408c7185bb'
dependency_hashes['MarkupSafe-2.1.2-cp310-cp310-musllinux_1_1_i686.whl']='2fb2d5c657ed023d4cab36433fd8acda778a66feb3e2dd2e25b864a21e3e8bc6416ec3ef3875eb15b07507f77a813634751497a43533417bb77fc18f818028f2'
dependency_hashes['MarkupSafe-2.1.2-cp310-cp310-musllinux_1_1_x86_64.whl']='fc0ece51b6fd5468ea83024d08f2c448e430e7541b9262d94db645768ee6a954e75a5fe00d74d9f82c844e0c293fa449017542fe742fd7d0f2f4f6d300e57cf0'
dependency_hashes['MarkupSafe-2.1.2-cp311-cp311-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='295338d568db27c0766d6a1ca2e071b60ab0830374a9b68711174a52ae88859293d5e0cdff30684456b814c82614511e18e82b341b3f3b1f879a6c91dfee83d7'
dependency_hashes['MarkupSafe-2.1.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='793bf57d19d1f89cd13cf477575a9a31396f75d0da9aaf18949c59e81ea288467be598dcf0577cb71d79bd4f81052f4ea15c320be38eb15d33288c400dfc17fc'
dependency_hashes['MarkupSafe-2.1.2-cp311-cp311-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='cd09ad7f6320721543ea6b677c558a7f0ecbc56dbf43cdb30f9f071ec9378542af2b2d70c942d17e86a814f628ed4e665616adf3ef90c8754a4ec7c9b72b4976'
dependency_hashes['MarkupSafe-2.1.2-cp311-cp311-musllinux_1_1_aarch64.whl']='f1e3865d2ba379322cab24b91c973aa7ebcb254a37764f76beff3eb9abb553a2fc8c67f7b9626e10d44c57176a073b6097f21ca9aae224a82a21646c90ee3d03'
dependency_hashes['MarkupSafe-2.1.2-cp311-cp311-musllinux_1_1_i686.whl']='2e6a41138e8361fda264e0790ad6cacabbbe6693c7d08a6a7ee0b38064a5b1fee84cf5930eee1a95f658777c51d652b200a4db1acdfd8813fdd3ae82102465fe'
dependency_hashes['MarkupSafe-2.1.2-cp311-cp311-musllinux_1_1_x86_64.whl']='478af9198dd18ef711016755bd77dcb178cd4ef8269acf166dd3be151269d3fefce3574457e5bcd91c330b6d12933daff8ad6577553f2179c76ced38c9d374e0'
dependency_hashes['MarkupSafe-2.1.2-cp37-cp37m-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='1b6ac1de291567f69405e9551a73338d309813446d4ccce80d2d311543898a756415ddbe3bc729a528bb827454bb1e188bb05e3d923f873aaca241b311451df6'
dependency_hashes['MarkupSafe-2.1.2-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='c4cb843221914dac34eb20ab409b3d3066769f1bf79e385203de574c05b51dc0f8eec62956476b8d99e06ea44b45b2327b2c632a10373d66a46d4a6401c21eb9'
dependency_hashes['MarkupSafe-2.1.2-cp37-cp37m-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='2087ae635b7e5cdedb5b57f84f110a606a0f69cb0eefc2a8ad90fa1219500b55d8233459c27f225d27c154e662610f35e05493dd8a4bc9d112763300b2541919'
dependency_hashes['MarkupSafe-2.1.2-cp37-cp37m-musllinux_1_1_aarch64.whl']='ddd1799d5becb875e3be5a7b432de77a8862a5d3caa4e82b47cc1e0fa26440d9b5653ccf56b9777323c04f8dece854124d3c77ced2b62819e6019a6aa67a5932'
dependency_hashes['MarkupSafe-2.1.2-cp37-cp37m-musllinux_1_1_i686.whl']='7ecdc21e0ed4d2499a698fbe0336d15fc630bcbd28277fddd05238b219a6c501dbd96dd0353f9c1ca89e1c5883bef2972fc3c3c8d408d02d8f427aba863b0cc8'
dependency_hashes['MarkupSafe-2.1.2-cp37-cp37m-musllinux_1_1_x86_64.whl']='efc24555a84d65097e63f013efe7984a26cc81fabc8ff8386c45fb7ada054a75578a69ac1b5bbc0c755c050436e1086f756ab35511e0b406b05bbfddc2dcdcc5'
dependency_hashes['MarkupSafe-2.1.2-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='ca5c9e4f6f62b930718c80a46af0fb657a24cbda610d92c73b29c1fba136e4468cdc50b63e0e99dcb657c3edcb7bbbd1c4423b23c9e56b545b2c070b6ca1cc5e'
dependency_hashes['MarkupSafe-2.1.2-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='f8b73180cad126fe44d6340e7282e5991cf06967a5facfcdd9bc956143c2fbb5b85c1ac50a65f333def6932bcf83a34f3d46a1a6007b60c17071ed027df05d93'
dependency_hashes['MarkupSafe-2.1.2-cp38-cp38-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='3b5e6ffa97ddd8c84c9e4fe8354e916774cfdf76ab5852f757f5ae6a984f99a7421fd9ca548e22d2d3afa21cc70903a4807030e5d5ba822f989830073f5257bd'
dependency_hashes['MarkupSafe-2.1.2-cp38-cp38-musllinux_1_1_aarch64.whl']='181dfc2666e97266fcdee173299e205f1938f1f2b34c52bbed6207d8602fbe54a730719db781e6f8d72b644a6b85261f683c72c1050fd6070f8b43e6c4092582'
dependency_hashes['MarkupSafe-2.1.2-cp38-cp38-musllinux_1_1_i686.whl']='30370db92aadf1e1ceabd12df7140cd018a2785016df62ef5a0f452c292026bf87e4e6a97bf39b43203537e1a8ad9cc617f01e6dc4572b7a964376784da104c7'
dependency_hashes['MarkupSafe-2.1.2-cp38-cp38-musllinux_1_1_x86_64.whl']='f3a693aa8cc1bb5c836218f1e0ef4e90b75b44e9e7f256f38fd4160816a9ef44453618cc2db27ae5a5033fe6a03810ae260213633a75720020e7d58c5fe2261e'
dependency_hashes['MarkupSafe-2.1.2-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='2f7f9edd7721ca700a1078bc89efd9859bafd285a80d100ea752a9815b2a9affad57b019daf15ff518f927b90296a91c24ff5dc95d92bf4fd939534b93ea22c0'
dependency_hashes['MarkupSafe-2.1.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='99a4e3b43021e6f915181da8a440b90a5347d44f717c337b9ccb99f6d4d5b5736e0ad65b549fcd480a81c8ba7720aa5a46aa659e7ae5d64a664da326e2aeb2ce'
dependency_hashes['MarkupSafe-2.1.2-cp39-cp39-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='40e172b0e6fe9a8dcdc8716db0f3fc543f8ec9ed2c7747653d9362034bd9ada8dda9b6b416572198fe3aa19339576fc19b38980f67dd4a486006da933d1266e9'
dependency_hashes['MarkupSafe-2.1.2-cp39-cp39-musllinux_1_1_aarch64.whl']='aefd12859788594aef77f1a2051ca14a7b7fa12b7e8d0f97cb0bc891773e9e2149bc27f23e73c68ee40bfd92cfefa73e6505d26f1a59a6f07fd4f07d19ea343b'
dependency_hashes['MarkupSafe-2.1.2-cp39-cp39-musllinux_1_1_i686.whl']='372a79b769710ca815afe0277f2cc8d1e7a1053baa05971a0733ff5a2d6964daad6cd856f262dfa8055200865ae9e64b0d1a919d56f810459549f86636b07982'
dependency_hashes['MarkupSafe-2.1.2-cp39-cp39-musllinux_1_1_x86_64.whl']='74684e845fda87cf27b2abc1164c47aae5154d69c0a7089616defac56787272616701fdd7caed710a951ecb0e30e9b82f3b39fbbda24dcbef0715b533c02c190'
dependency_hashes['MarkupSafe-2.1.2.tar.gz']='84dbeddaf2df713b3cce94eb64876fea8f80c608e25130c18e4691be2b1dea56df8b772d26c0caca88231ef795125eb9678210c33bf20518c18e3047912ddb4b'
dependency_hashes['pip-23.1-py3-none-any.whl']='a15bae4a0c1548cfdf1b886157018b31c723aeefe68794cccf83b16e51d4b1874f885e33117172cb36b42613ec03d4aa82cc4318f042e2b7dcd4e39293e91a94'
dependency_hashes['pip-23.1.tar.gz']='6573096753db231e3189ad66d9fba08b99d1320593131ced7cee2d4442b137749fd0fc5c98fe338c4683081ea1c1bfd269a752ff16052c72457f8bb91265b5d2'
dependency_hashes['platformdirs-3.2.0-py3-none-any.whl']='85989efb26079ae10429a6a1d4cc23cbba8dd518b0fd8cefad3f1fc15a9d10b28442ebe7729e3acb9f79c3075d8968333473a95e64c17e5b0115038e26693019'
dependency_hashes['platformdirs-3.2.0.tar.gz']='2e4613f563b7014b526e1f81f561726a0060983b0e998ce46d070b2f4f4ec26ad46d6a3cd242fb14a420e6439207b9c9eeb31daac7ec65005abc3a74131e5cf8'
dependency_hashes['pycparser-2.21-py2.py3-none-any.whl']='aae67923f45abd1d781d03e0ce848627a07e9cf4c61a89bf32f1b5f638ceda08de39a038c46ed29d2df967d76be4f2572346bad087ac32b418e6fe654fd28e43'
dependency_hashes['pycparser-2.21.tar.gz']='e61fbdde484d1cf74d4b27bdde40cf2da4b7028ca8ecd37c83d77473dab707d457321aecaf97da3b114c1d58a4eb200290b76f9c958044b57e5fed949895b5f0'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.manylinux_2_24_aarch64.whl']='853446c38ce5488e18eba166f67650bc4f50044f509987ad2ae4830d2ed85284f057c3a4304180ad265bc33fb9cd6570488a37e40bade5e202ba201ad368af84'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='d3f24397a6a3a7a56652a56c8e8cfcb1ebc167b0d2dfc38c450d8fbc363b2b5c1226e58724a692b16a7e4f1022bb93e904664ff54640bba28720134058e2275f'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl']='c3502047add3590c1a1e60908e21d62455e2b4ba2f2efaf0f5118bf915934de9604d00036b3215ed54890a51a088872909409b296141d6241159c119d751a947'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='01d38ba9cdebf0cc658b187a753f63065cea29ca757296cc1d40da4c2609b8cf96a1df1af7bb75bec61af767cee4ac6a20aa858ba060b4c61807800e57e53fe4'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-musllinux_1_1_aarch64.whl']='61e07a421705e5c1613cbc888ff594d7e3457090e9654280f2b6e54a84e5d6dcd56292fd3c47b86a59be6eecafa8f17ad5d710f45b7fcda9f57d9c7343328bc2'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-musllinux_1_1_x86_64.whl']='9720cfe64e70667804c197a1762db2985bf5893ae774418f50da9a3d31135b8935fd497c5fe4f92909f6e0ac70e3c5dd57f6322ab780d29b12741c64c0d2c007'
dependency_hashes['PyNaCl-1.5.0.tar.gz']='cea3e4556432588630382abae6debf9203c7f55da286509da547a7921e4dbad98c915743625c68e5f7187fcaf6d4cdaf7ed2ed3ba60bd4c10ae6e3f88608dc65'
dependency_hashes['pyserial-3.5-py2.py3-none-any.whl']='29bce14c59e60f54ce476d919c9b9477190ef6bb44a6102f71345840f5c0f1d0a323c4c3c302c5f380bfaae32cf04142ee528b6dd7184f17789632a31d5ecab6'
dependency_hashes['pyserial-3.5.tar.gz']='c8df5e50d952d5a6dcf1d9253a6ba953e9763c545a867da66c22c90dfa015aba0194f2a8f29a229d0a5f4dc8bfeeaaab8bcfda4066ed78a18b151bc05e6ae327'
dependency_hashes['PySocks-1.7.1-py27-none-any.whl']='3e0b1775c14fe091d10e30b03f7f0c770861152e493cf3a3143b0de01aadbc73f684f0d4305f1a694932d4bdcac8056c422437130640e19028cd9fba59ff0b3f'
dependency_hashes['PySocks-1.7.1-py3-none-any.whl']='313b954102231d038d52ab58f41e3642579be29f827135b8dd92c06acb362effcb0a7fd5f35de9273372b92d9fe29f38381ae44f8b41aa90d2564d6dd07ecd12'
dependency_hashes['PySocks-1.7.1.tar.gz']='cef4a5ce8c67fb485644696a23bf68a721db47f3211212de2d4431eaf9ebd26077dd5a06f6dfa7fde2dcb9d7c1ed551facd014e999929cb4d7b504972c464016'
dependency_hashes['requests-2.28.2-py3-none-any.whl']='220e0e122d5851aaccf633224dd7fbd3ba8c8d2720944d8019d6a276ed818d83e3426fe21807f22d673b5428f19fcf9a6b4e645f69bbecd967c568bb6aeb7c8d'
dependency_hashes['requests-2.28.2.tar.gz']='3c4ba19a2bb6ba38a4118cf246db3855401869d54ee7ebd9bee40b435420381fb737d4c69768f2bd97914a30d66233c7058cec51aa629af0dff3b04e6f997a3d'
dependency_hashes['setuptools-67.6.1-py3-none-any.whl']='ad7a81c60b2b3f190561178531123a0e2d278c4cd9615930d5b0276fc79bea390f1cc92ab37061378ebee09fc36c21440a4db00f20029093570b7006cd14b25b'
dependency_hashes['setuptools-67.6.1.tar.gz']='197910ad4c4058af0107e240d2e27bc2c1ff373cb3fba33af09eb3cc42614c45e4bb73a65802f253466eafd94517e08b51e98f50213817ad03d88ee0ccf9adbc'
dependency_hashes['six-1.16.0-py2.py3-none-any.whl']='656b010ed36d7486c07891c0247c7258faf0d1a68c5fb0a35db9c5b670eb712d5e470b023ffd568d7617e0ae77340820397014790d14fda4d13593fa2bd1c76f'
dependency_hashes['six-1.16.0.tar.gz']='076fe31c8f03b0b52ff44346759c7dc8317da0972403b84dfe5898179f55acdba6c78827e0f8a53ff20afe8b76432c6fe0d655a75c24259d9acbaa4d9e8015c0'
dependency_hashes['stem-1.8.1.tar.gz']='bad2f4f96e37caa3ee2928bb027318c4941ca3f6c0072c5f6e87fe647d2b68400ad352d9c27fa2a35c00f4f327aa9cc00e2907b21a9cbd26fab46ec21e2a038a'
dependency_hashes['typing_extensions-4.5.0-py3-none-any.whl']='ec14fe7ff4998bd9ed4c57a491062d0d0d3797aa326c71898c879455f0a2dbcc639ac9b51f68c03a8635459de7612b31aa2b71f364ac6d2dd6b696cfd80df555'
dependency_hashes['typing_extensions-4.5.0.tar.gz']='a38a018be2c22b6cc1d9a14477206271b44fc110db2a958f3cb5b179856c9f992b2359ce077dd0d25c3711908e4009d44afcaa9de6bd422bc1599c9533f8200e'
dependency_hashes['urllib3-1.26.15-py2.py3-none-any.whl']='4f2cdf7174e25fb6ee6dfff0501c51e4f56bd9e6194cfcf31c1c2fec0a28032a7335867b729c06de550b9345118902fed935234606d8e6987928679202a9c1f4'
dependency_hashes['urllib3-1.26.15.tar.gz']='b6ddb29c15b2d729605a6acb7c602f18c75a937cdfe9649d35d790a59fbb1d96a8d68975ba0a4c073c9f1750e383c67b7566dbcd81b3e8611501e9f4153e9a2b'
dependency_hashes['virtualenv-20.21.0-py3-none-any.whl']='2249e1df6de4cd6f30068b2b58634b0a5847426c1227be2bd134b5d2298e84dd3b7bcbf60b0952c6ef432f1f65a330b45df92f4953d0068d750dfb52e72a5e23'
dependency_hashes['virtualenv-20.21.0.tar.gz']='77aae5ebc5007093953c30da1eed996e851a65c7dd1f7a3a85961a1bb251b3d7970936eea1efe8babb216d2024072bdbf1c1a97ba8760a04a0abf6e7c3a27d09'
dependency_hashes['Werkzeug-2.2.3-py3-none-any.whl']='82abbbd482fbf92ec449dfc5aab673a9cf29f81227f39b101b3433a4106ddb72498827eda45cee751a2e47768d27c04f77bc87bd7bc82faecc94cc426a316c00'
dependency_hashes['Werkzeug-2.2.3.tar.gz']='33d0581533ee83e5daad85c36d270cdc9f66b804b6e3c24254f87d50fb504211af6be277a8638003336f23edc2bfc635f45efae7cbe54dae174693bd272fa137'
dependency_hashes['zipp-3.15.0-py3-none-any.whl']='ac96786e5d35882e0c5b724794329c9125c2b86ae7847f17acfc49f0d294312c6afc1c3f248655de3f0ccb4ca426d7957d02ba702f4a15e9fcd7e2c314e72c19'
dependency_hashes['zipp-3.15.0.tar.gz']='74a512428fa29e284c515a7e6c45030e4d840727e12e376bca480a90b7fd1e111462deafa372ca9aebd9f53c24bc37111570e7a4a6a873c0b7dee9a0277c100d'


# ----------------------------------------------------------------------------------------
# Package lists (the list must be ordered so that sub-dependencies are listed
# before packages that use them, and the list items must use the same capitalization
# as the dependency filename).

pre_packages=("pip" "setuptools")
virtualenv_packages=("zipp" "backports.entry_points_selectable" "filelock" "importlib_metadata" "six" "distlib" "appdirs" "platformdirs" "typing_extensions" "virtualenv")
tcb_packages=("pycparser" "cffi" "setuptools" "argon2_cffi_bindings" "argon2_cffi-" "PyNaCl" "cryptography" "pyserial")
requests_packages=("urllib3" "idna" "charset_normalizer" "certifi" "requests")
flask_packages=("Werkzeug" "MarkupSafe" "Jinja2" "itsdangerous" "click" "Flask")
tails_packages=("pyserial" "PySocks" "pycparser" "cffi" "cryptography" "PyNaCl" "argon2_cffi_bindings" "argon2_cffi-")
tails_packages+=("${requests_packages[@]}" "${flask_packages[@]}")

# ----------------------------------------------------------------------------------------
# TFC Source file verification

function compare_digest {
    # Compare the SHA512 digest of TFC file against the digest pinned in this installer.
    purp_digest=$(sha512sum "${INSTALL_DIR}/${2}${3}" | awk '{print $1}')
    if echo "${purp_digest}" | cmp -s <(echo "$1"); then
        echo "OK - Pinned SHA512 hash matched file ${INSTALL_DIR}/${2}${3}"
    else
        echo "Error: ${INSTALL_DIR}/${2}${3} had an invalid SHA512 hash:"
        echo "${purp_digest}"
        echo "Expected following hash:"
        echo "${1}"
        exit 1
    fi
}


function verify_tcb_requirements_files {
    # To minimize the time TCB installer configuration stays online,
    # only the requirements files are authenticated between downloads.
    compare_digest a570d93fe84783878837db293e4b697cca682da8e7e451e7453e202f5c9fcc78225c950de3b0c4b365de54124ae7e2a06ebc5651e39c0805a08cfe3149fcc1b5 '' requirements.txt
    compare_digest b3b45f2c273ea60e6f021425aa22c5a8ca863d3e75a1f1cfd9104e06c3e02d0ad0af30735df1d49b29015c14ef11df1c6081f2705f0e4113e4d082409f61ca86 '' requirements-venv.txt
    compare_digest 3bd2091aa3ba13fa28f5e7bd4f7c1209265540cd0edd6c4b0529b217007683bcfd8f1b13cd64b53fd496e9e80229df7fd1fcc613070c374474cec1c71a0f2335 '' requirements-pre.txt
}


function verify_files {
    # Verify the authenticity of the rest of the TFC files.
    compare_digest 487884d12fdf168c2007fd8d23d5dfc1f98d39237556f9c4368d59b8d47988cec265d27b33ca032df9f4ca7c2605950b5141efe5e3079f13cacaae08ea070b00 '' dd.py
    compare_digest d361e5e8201481c6346ee6a886592c51265112be550d5224f1a7a6e116255c2f1ab8788df579d9b8372ed7bfd19bac4b6e70e00b472642966ab5b319b99a2686 '' LICENSE
    compare_digest e49f14d4ec1d29fbcb1724f2fd7886fbc7c7eb7c719e022292d60c8ec41e9be0f852c47b6d20bdd6bb67b84e44d9642ea94b5160b57242de22e00fd5f8ae0323 '' LICENSE-3RD-PARTY
    compare_digest ebf91b5274157db7aa78658066054212216d49492479ac1174bfeef7a4b919fa7d098eeeee5640cf713e71c336be43657915273edefc79847c895ac8e34f3acb '' relay.py
    compare_digest 5abcffd06df0c010fa3cc776f346cbdc1de7b0b3563db96c9ddf2609138d007210fb7b39ee2c0e9fe60f092ea93203be92c8dce6c66c0c39e1d7d3b51e69a161 '' requirements-dev.txt
    compare_digest dde48a87329c674237339b0489c76642d13398d813a5b8c25f473ff0734e3d8d588f95a9fe418d45a1e986aea207e70c8fb15c4e8e2de2967d7463581d2ec09a '' requirements-relay.txt
    compare_digest 81f96f22264581f3c7bc8306c927aafb62c7224a301b3292a843efff60a7a1e604d397145bbdf03874cc2e9ac4c7de4798d3e66bb2b021ef3b0f1d4624a06097 '' requirements-relay-tails.txt
    compare_digest 79f8272a2ab122a48c60630c965cd9d000dcafabf5ee9d69b1c33c58ec321feb17e4654dbbbf783cc8868ccdfe2777d60c6c3fc9ef16f8264d9fcf43724e83c2 '' tfc.png
    compare_digest f26ff28049f8a1fead58a0d41d6b23d6dc693b07b8962b1d14047be1bd5191c1a0f5c4f93d1bb043d463d5d01f3032f7bbbe1d408e75c7e1d0df0db08c82a563 '' tfc.py
    compare_digest 15a20bbe1fde78f13f92bad918752e34a67ca14501ae2348a7e723b4c61037acc991adfae1100b076a0971b4a5979600fb89a9c1170f4207d048b77d0c97a43a '' tfc.yml
    compare_digest cd1f507b87e69a27f67b16a2b18707f102a06d391fa60fc3e3db98e4520ca175fdaf452ef20e34aaa244217db2ec98232e46b217a457b4433c3d08ab12c9456c '' uninstall.sh

    compare_digest dd2dc76c186e718cd6eb501985f3f8c639d303e44186c5f21ca8e8cf6a25b329c573ca489eda80877be51ccaa6b72b4e763060d0f0f27c0217e8c6b1016d75ca launchers/ terminator-config-local-test
    compare_digest 1e803330b16a874a0f79570de8bba9e382485b83e2c3ccc2431be195d2817a694ee5c42e794c6236957f6f4938793006fbd9630422d63f21685e6d48367406eb launchers/ TFC-Local-test.desktop
    compare_digest d55215cddea892208c35c9ae5b67f246294fa7119e4810173ad55ced20c4a254457bdb633df799b52f0dd42635c3a5222186809d5e316bc10e673137054e9f06 launchers/ tfc-qubes-receiver
    compare_digest baeea218e0535623ae3b06ff366085203bb96470600060af3b99a05d77d9f652186b93147873539790d65fa52eb7226c28cc82f37bcbacef5c264087af7601a5 launchers/ tfc-qubes-relay
    compare_digest 23949a7599fa94fe828eaabb74e8a0bca9c93235cf093fb1a76d5ea672ce9fb48e5afea73beca49292ca779513e1c60171039bc782dd6306c6b27b11e605d752 launchers/ tfc-qubes-transmitter
    compare_digest f6547eaa71af85b57948185b4918d943214ed8b2d261581a7dd9d6b9b5ce584cb74280b7339aaf62a58825fe0372eb4a2863fe71b2c2cd07a07a755d79dc59f9 launchers/ TFC-RP.desktop
    compare_digest cf96f96059918d739b0af3bbc03b55cfe694017a1fa1485c08e60b511f169ce916b85a81192ce491a92630b7293bc001f8faaecb6750957fba03fd471232202d launchers/ TFC-RP-Qubes.desktop
    compare_digest eef50cd8a5e8b8d914f178a93502fd8a02b9a4c3f7fbe76e767ea441e93ff9c652f90afdc04a2b51cba18239add33632f284847ecf258588cccffdabe3752b22 launchers/ TFC-RP-Tails.desktop
    compare_digest 3f77b30a0b28f18b34275979fee1036a80e834bc29b425b2eddcdf2e688991a96d6989ca0b8c5652f20377818167db9337e23b3d75d7325e97f2bb9eb1589c8f launchers/ TFC-RxP.desktop
    compare_digest 27c0db9b8bd9017c75a11dd5d0e8e6b6dba5efd0c031069dd27251e9f7de31788850dc3585793c5f5ddd88c3ded06fe611b92b6a97f9403c264c501cc0dde0bf launchers/ TFC-RxP-Qubes.desktop
    compare_digest e50015fe48212f59ee296f771365d0270a77e5b82a9fd4c8ab8091b66f0ca902cf00ebf0ae2487f6b88c504314194c28f3510337dd7d17a604c54c292c9bfff7 launchers/ TFC-TxP.desktop
    compare_digest 1a7a1db2fe5ae062304ee2ea4c04b64d855138915c5f9926d6e9fe161d53cefa951cc25671a870141fe241adf58da9879021dae82f0ed289cd51093256b4ed60 launchers/ TFC-TxP-Qubes.desktop

    compare_digest 35a92c1edbb9cb088b61aad4d373778445427ffa2e1b933fff43d0904303ec458291cd64f3b671f4d4a98b02ed47939f3efda19711be6ec4ff5d1f2f92571ed8 qubes/ service.sh
    compare_digest 4594d3dd0c61867605c548117c020274a8bf5b3a0345054b8c57dd1ccb0388892812f51fc3e15c96dd3167e816c4cd92966f1da5f08591e0585aecbda387591e qubes/ writer.py

    compare_digest 68797896fbdb12985c39c55fbe128fcf1e9e9a92a573023af23e7456e2e4fb825ea7fc95c8fbf38e63baef92d7c229ab4245a433e03268ad28dcbb2e3fc05cdb src/ __init__.py
    compare_digest 68797896fbdb12985c39c55fbe128fcf1e9e9a92a573023af23e7456e2e4fb825ea7fc95c8fbf38e63baef92d7c229ab4245a433e03268ad28dcbb2e3fc05cdb src/common/ __init__.py
    compare_digest b88c4b45876386a80d0b5287bfaf330ead747f16a47fc8e86bcf6baee252e150b1374447b0da8b062fce26e0b5f83df517f9b18237e4d741d3658a93e826b797 src/common/ crypto.py
    compare_digest dbdab1d20af3cdb0cbfa9c798621eb0760642314c9310ba34afc565da0663bd9f2ae89a3ebf99721f12eba05952c63e3d9117502a3e7fd2eeb89e1c1d29c5c7e src/common/ database.py
    compare_digest 16e13b85289643f3de9f11643cfe22f890ca358aca320dcd28c14b5154bb4fac1e9d432961867139f3efc3e1f71bfa26062461cd74616972fab2c36b7a5c56e6 src/common/ db_contacts.py
    compare_digest c2447476c023ac4a63ac2e0c8f043e6cf0520bc323c4fb8a798e7bba974d77a7d79468b0a71f1a27e757896de8fd0ab61df5ea5ec271ecdeb3ed438a9c50ed87 src/common/ db_groups.py
    compare_digest 6d57e56219a281f98fef2baab43993d4a20cbcff08502502d2fa51e70aa90817737f0f621921d2a1c2fb168284f93fb5c095cfece8efc0a2bb486764b7fee6f7 src/common/ db_keys.py
    compare_digest 1fbafa30babe94394fb71f2ed989c6b713c193039bdd20ca228e61bf0cd4558b3dc176fb594d2cbe21bf8bede5069895a55fc8b2269becc42abc5928f9a1eecb src/common/ db_logs.py
    compare_digest ba9b06ac3c9c61268af13eba5d3350e3f3e69216b8359b2fc33f203abbe1af00008c11b4d91c37a787d0aae032947c2e1bd910d5931a33c2da59ed7c75bb7005 src/common/ db_masterkey.py
    compare_digest d1bc388e7956db3ac597b95b3a4b563417a63159712bfcbe019515ad4860fa5095c07191d8be1fd0071e507081a010c1bc08d1606cc40b92e3a0e830b30e5abb src/common/ db_onion.py
    compare_digest 5decfcbb779b78d5a028b53b9112dea8764997b3c0356383c275b47bab338bf8cb6e3ef07fd939b851aed79cbd4e95782234c5880e1e46c2019aa2f17497cb32 src/common/ db_settings.py
    compare_digest ae45a09490cbea8e44823e8164873522c06851531b03088a043c9fa7d88a563e8948e609b47129eed99fa586dc91ec235cc031f7da426a00f1c102e8ef255554 src/common/ encoding.py
    compare_digest e7112dd4df0d0a15328f5cb41f024b644fd6a30196658d6d6341254e355006a353b0f54f7887514aaf352505730f0d43897563d837603cb09ce07cb3307f81d4 src/common/ exceptions.py
    compare_digest 3eccce113115c3bf294172581073d1b801cc83599a927535c740ec0e92c448f3f5516fb478c7c3d9b1d535acdbb42af203b42c24f07ae408e7a6259b3b215c1d src/common/ gateway.py
    compare_digest c62206beae61a42f4b9d1b168a344c7d6ea7e5b6488a477a828b1f1cbe417924fd2572e0e9eb6a30d302e7786f4c20e35c6a2ffd2d542e5595cb9f694fc3ca4e src/common/ input.py
    compare_digest 8f44cb448d56f4a8429399bb410cf020f65ae3518e021456475ce3d9c39b39772977676036fd726f41d56ac6c8f9c708f92951f6259ebb45f9fdabf7cc088ce3 src/common/ misc.py
    compare_digest 3e000b7a9bea105f3961ac745fd55d4edf6f3c012b81528c9714ad857b7310cbe6789abb6c9bf67df01da2fdb967e3aa881d7b6d12390126fc413428cc7d4a38 src/common/ output.py
    compare_digest ba90b480d45d04428dd20e5e25673782d57de61206ea34fbaf083f14cab577f7dfad7c59c0564c910add7af4ead47f55960fdb330a06be0388651b3f84701a61 src/common/ path.py
    compare_digest 333e495c3f3a7b8b9c4a30a1a81feceb77198b6b6afcc2ea523611e0c776d1b5bacccedec806ef78f1088d855168248df6278907bc97a5ad2f3dc84af845509e src/common/ reed_solomon.py
    compare_digest d94182a5bf55a446e9953e747c060a9c774848b6795e01050d9a4bfc7566ac5d1f754672f0c4bc3d0911668171254ce70cf8e80b633e4744fe787378e94f887c src/common/ statics.py
    compare_digest a8a898dff09e596c74d913cf030a1dd35f2131efa6478ffa8ba5b5b8933d15b90211818b99f675c40db5b5ac04fc48123f8247e11c10b6eb4f0a0d5bca4c1dde src/common/ word_list.py

    compare_digest 68797896fbdb12985c39c55fbe128fcf1e9e9a92a573023af23e7456e2e4fb825ea7fc95c8fbf38e63baef92d7c229ab4245a433e03268ad28dcbb2e3fc05cdb src/receiver/ __init__.py
    compare_digest 6bc7a39c5b3c7a28b926531e7fa90f40acc01efff4496a58793e1f7ec2af1dbfec596a01348d7179129ddb728dd6ab0052321bc72d225f11ae575a0b2a41c4c5 src/receiver/ commands.py
    compare_digest 04bb4eef453f2ed328d7aba202a75e033c415d2def36d8001390eb3e0c0aa661364d2df0d48a84084de6e1060f3ddaa5ebc560dec186afaf355c6eb84f9cafd3 src/receiver/ commands_g.py
    compare_digest 28a2e03a7c96bf0b9d990e5c19f57c565b6d524b84b23a875246408658bd3a1cbd1f631653612d6daa5aad11af26628e10524dbaa8359cc131a66bd4acf994f9 src/receiver/ files.py
    compare_digest 10aa177750e7b6ad41108b0202a0d7b84e72ea57294de44e49a7fedb8dbe953912936ba245f2765360aa76e885cd436103d3e1d182a4092660bd8a42b5a6d9ce src/receiver/ key_exchanges.py
    compare_digest 98b49338f8841c5bf5109e79d66a58b3b91b5fad47ae69d93e4003a9da55940b1edeed0d9051c138d4cf25b1b15c843d07d374556c6f85782e30e49435d30d11 src/receiver/ messages.py
    compare_digest 1b9b5e6dc0ae6369097135f0bc19b6433823e1ca9cf721fc0a899b21b328ee6bce6c474391f86e46baae7f62e538b4db488fca738a1a49ba5a1f9a0872a5d25c src/receiver/ output_loop.py
    compare_digest 0db528a2d42ab56ef5444aa3daf8cfcae7a060ac9ec364069eaea0e83053e49691f586b3766b806dfc4b4e0dfcd5ec2deec335c36e61f258ad26296db9836e3a src/receiver/ packet.py
    compare_digest 74210deabfa2ecb11a23223b4c6f8beea31ac4e53fbeb59554ec3b3a029fec3f72bca455e08af9f935698cdc46a404ff6a082ab3d113bb3f7571f7769c5e7f82 src/receiver/ receiver_loop.py
    compare_digest b045b66f2d68abf33fd2a624bd932a49fc26f7744726d2856c82c60a71b0a135f56d6cfcdbbf579fc39c1e7be7abc188e694f6e655e028e89ae7df63698dc797 src/receiver/ windows.py

    compare_digest 68797896fbdb12985c39c55fbe128fcf1e9e9a92a573023af23e7456e2e4fb825ea7fc95c8fbf38e63baef92d7c229ab4245a433e03268ad28dcbb2e3fc05cdb src/relay/ __init__.py
    compare_digest 2eb01da19c775832bcd0ca042e0b74dbf53fec49eea110b98a80e42f016dc5f9831370cc79c41f4cd9ce331f0414c34e3eeca3f106d930db724c65559d5da236 src/relay/ client.py
    compare_digest 88e4648da2ae59f63ffe0f3f0f5e46e6c417a8d9e70c9f91a01aa316ac5d0ec5258ce7137912420a742085492429f11ca2e4c07ec701e6220e860ed36b400ba2 src/relay/ commands.py
    compare_digest d8a132ab165d1278b0e39b1d0929c9ceb5d3e70ec1d6b5d246bbc7186a0da93739d081cdbddf747327db5c392299544360f29685c436a11a47162c2674db02bf src/relay/ diffs.py
    compare_digest 27d670b740b66ede348768cb97be145b302847d602eae742a6a5088b0cda64ea91519df5764646f6ffccaaf029aadd7b7d30c8219d5d8325f56a0f2b76c80353 src/relay/ onion.py
    compare_digest fd8163cafce34280af4ecab71540ad76f08a82b78838b1f25ba43b0a6de032887a01a0e269f964517ddefb9fdf3050d3d4a15894af2cf715e4a243ebec99f439 src/relay/ server.py
    compare_digest a44e41a883675c48a790ec05e52c4d0712131cb270bbcdbfda4c4c3357cae592f1fd5ac4eee9aac5df7f175b5e837caa72b43ce6721337a76722f1d0a5db4039 src/relay/ tcb.py

    compare_digest 68797896fbdb12985c39c55fbe128fcf1e9e9a92a573023af23e7456e2e4fb825ea7fc95c8fbf38e63baef92d7c229ab4245a433e03268ad28dcbb2e3fc05cdb src/transmitter/ __init__.py
    compare_digest 8689958d13a3126bdaa325eea04101bd01d98409490c44d67d2d63409433889c44373b1b86cdfdc613f6cf43289f49c0c5addb0e3ae0dd603664951e2cd77304 src/transmitter/ commands.py
    compare_digest 98c2ea944b45fcb4381279cea96d0509a1102e57ee7544c5312d7edf1129675524d6867781dcf38e7a91ab69a088c9a321e81a3eb43d785b001d1eb432fd6224 src/transmitter/ commands_g.py
    compare_digest 0d5d3cfd770d2d2937b65ea0fde478927cf53804019d0307a8052b5f628ae39d539bb92d9602a1987fd4840424bf7ae98a478f418e1125cb1df52a7330a9c5bf src/transmitter/ contact.py
    compare_digest 9d8f78111eb27291bcbd9b9eb4d86e1c34bc7cc3ebf70345532bc7ce9182a43aa2487da1543506f07c2bd4867811a366ee6b3962c3a870534b0b029df03b3441 src/transmitter/ files.py
    compare_digest 85922f44b80eb9065a552bb96263b1c94fb4911d16d4d79ccc40d43c3481669c20a519a4c17d8b790c8fbfa5828bd17216b2992ce66a8c7ec4598a8f267b100c src/transmitter/ input_loop.py
    compare_digest 7ab7f8e5f6990f9379d803d78a680136772d7bfbc19322f7885b7a245d2a779c3ece46c096fc212c3552136f5dd04d96f6e5f4e7bd8514091139fc9c724cbc83 src/transmitter/ key_exchanges.py
    compare_digest 3b86560b913b91d7e81c1fb0fcb1f2aeb530a6f8605c669be392067d7e2abd36be1b1409bc96a7c3d9bc4daf4756d9c8873fb4bd61654a9eff3228dec998f57b src/transmitter/ packet.py
    compare_digest 01eb1b691d50fcd9309a3f3a35de155c9a82b8c8c77a1a88f4ef04f9975cf7f931acf8ab4f8d535e611a09307fbfc74991c56b5c404a23453da985c378bd9eec src/transmitter/ sender_loop.py
    compare_digest b8b45c994e93670b581a6c1266c8c3e37e0604ed50b7f09a64de1aa3dbe9d0ce5971a7469f45bb1eba2e5c41680b834e89bcb76f45aa9ed0cd0091d33111f0e5 src/transmitter/ traffic_masking.py
    compare_digest b038e1df99ecea383f2d6c6f14f4d8e9a7568a26766abc64c80d1b57ea514caa7fee300ea5a5613f98a2ce5e0c8f89c0a3b5c3f7ae0df4bee3a94309609f92da src/transmitter/ user_input.py
    compare_digest edea4f02bb343eeb0a8efc6958ada9d8d756c22fe1b2a0e8bfcefe76c049acf59e0d8f0a360cc9dab0a427df7aad9631719850e9858354c59867f6dc44f5df5e src/transmitter/ window_mock.py
    compare_digest 4c6968cab7508e2114ece80cfc78abc81e098b8b6f85d857a4733f6bb4b3a44b6230e966ae9993611cd179ce1d9eeadbf676b0a8dcba8c0f282ea1b8ebe3753e src/transmitter/ windows.py
}


# ----------------------------------------------------------------------------------------
# Printing utilities

function c_echo {
    # Justify printed text to the center of the terminal.
    printf "%*s\n" "$(( ( $(echo "${1}" | wc -c) + 80 ) / 2 ))" "${1}"
}


function exit_with_message {
    # Print error message and exit the installer with flag 1.
    clear
    echo ''
    c_echo "Error: $* Exiting." 1>&2
    echo ''
    exit 1
}


function install_complete {
    # Notify the user that the installation is complete.
    clear
    c_echo ''
    c_echo "$*"
    c_echo ''
    c_echo "Press any key to close the installer."
    read -r -n 1 -s -p ''
    echo ''

    kill -9 $PPID
}


function install_complete_qubes {
    # Notify the user that the installation for Qubes VM is complete.
    clear
    c_echo ''
    c_echo "Installation of TFC on this Qube is now complete."
    c_echo ''
    c_echo "Press any key to close the installer."
    read -r -n 1 -s -p ''
    clear

    kill -9 $PPID
}


# ----------------------------------------------------------------------------------------
# Installation utilities

function t_sudo {
    # Execute command as root on Tails.
    echo "${sudo_pwd}" | sudo -S "${@}"
}


function check_rm_existing_installation {
    # Remove TFC installation directory if TFC is already installed.
    if [[ -d "${INSTALL_DIR}" ]]; then
        if [[ ${sudo_pwd} ]]; then
            t_sudo rm -r ${INSTALL_DIR}  # Tails
        else
            sudo rm -r ${INSTALL_DIR}    # Debian etc.
        fi
    fi
}


function dpkg_check {
    # Check if the software manager is busy, and if, wait until it completes.
    i=0
    tput sc
    while sudo fuser /var/lib/dpkg/lock >/dev/null 2>&1 ; do
        case $((i % 4)) in
            0 ) j="." ;;
            1 ) j="o" ;;
            2 ) j="O" ;;
            3 ) j="o" ;;
        esac
        tput rc
        echo -en "\rWaiting for other software managers to finish..$j"
        sleep 0.5
        ((i=i+1))
    done
    echo ''
}


function steps_before_network_kill {
    # These steps are identical in TCB/Relay/Local test configurations.
    # This makes it harder to distinguish from network traffic when the
    # user is installing TFC for Source or Destination Computer: By the
    # time `kill_network` is run, it's too late to compromise the TCB.
    # Hopefully this forces adversaries to attempt compromise of more
    # endpoints during installation, which increases their chances of
    # getting caught.
    dpkg_check
    check_rm_existing_installation

    wait_for_tor
    sudo torsocks apt update
    sudo torsocks apt install git gnome-terminal libssl-dev python3-pip python3-tk net-tools -y
    sudo torsocks git clone https://github.com/maqp/tfc.git ${INSTALL_DIR}
    cd ${INSTALL_DIR}
    sudo git checkout development

    verify_tcb_requirements_files
    sudo torsocks python3 -m pip install  -r "${INSTALL_DIR}/requirements-pre.txt"  --require-hashes --no-deps --no-cache-dir
    sudo torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements-venv.txt" --require-hashes --no-deps --no-cache-dir -d ${INSTALL_DIR}/
    sudo torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements.txt"      --require-hashes --no-deps --no-cache-dir -d ${INSTALL_DIR}/
}


function verify_packages() {
    # Verify authenticity of downloaded dependency file.
    dependency_list=("$@")
    for dependency in "${dependency_list[@]}"; do

        dep_file_name=$(ls "${HOME}/" | grep "^${dependency}")

        # Move the dependency to root controlled dir
        if [[ ${sudo_pwd} ]]; then
            t_sudo mv "${HOME}/${dep_file_name}" "${INSTALL_DIR}/${dep_file_name}"  # Tails
            t_sudo chown root                    "${INSTALL_DIR}/${dep_file_name}"
        else
            sudo mv "${HOME}/${dep_file_name}" "${INSTALL_DIR}/${dep_file_name}"    # Debian etc.
            sudo chown root                    "${INSTALL_DIR}/${dep_file_name}"
        fi

        # Calculate the purported hash from the downloaded file
        purp_hash=$(sha512sum "${INSTALL_DIR}/${dep_file_name}" | awk '{print $1}')

        # Load pinned hash from the hashmap based on filename
        pinned_hash=${dependency_hashes[${dep_file_name}]}

        # Compare the purported hash to the pinned hash
        if echo "${purp_hash}" | cmp -s <(echo "$pinned_hash"); then
            echo "OK - Pinned SHA512 hash matched file ${dep_file_name}"
        else
            echo "Error: ${dep_file_name} had an invalid SHA512 hash:"
            echo "${purp_hash}"
            echo "Expected following hash:"
            echo "${pinned_hash}"
            exit 1
        fi

    done
}


function install_packages_as_root() {
    # Install list of verified packages
    dependency_list=("$@")
    for dependency in "${dependency_list[@]}"; do

        # Find file that starts with the dependency name
        dep_file_name=$(ls "${INSTALL_DIR}" | grep "^${dependency}")

        # Install the dependency
        if [[ ${sudo_pwd} ]]; then
            t_sudo python3 -m pip install "${INSTALL_DIR}/${dep_file_name}" --no-deps  # Tails
        else
            sudo python3 -m pip install "${INSTALL_DIR}/${dep_file_name}" --no-deps    # Debian etc.
        fi

    done
}

function install_to_venv() {
    # Install list of verified packages to virtualenv
    dependency_list=("$@")
    for dependency in "${dependency_list[@]}"; do

        # Find file that starts with the dependency name
        dep_file_name=$(ls "${INSTALL_DIR}" | grep "^${dependency}")

        # Install the dependency to virtualenv
        if [[ ${sudo_pwd} ]]; then
            t_sudo "${INSTALL_DIR}/${VENV_NAME}/bin/pip3" install "${INSTALL_DIR}/${dep_file_name}" --no-deps  # Tails
        else
            sudo "${INSTALL_DIR}/${VENV_NAME}/bin/pip3" install "${INSTALL_DIR}/${dep_file_name}" --no-deps    # Debian etc.
        fi

    done
}


function remove_packages() {
    # Remove the dependency installation files.
    dependency_list=("$@")
    for dependency in "${dependency_list[@]}"; do

        # Find file that starts with the dependency name
        dep_file_name=$(ls "${INSTALL_DIR}" | grep "^${dependency}")

        # Delete the file
        if [[ ${sudo_pwd} ]]; then
            t_sudo -E rm -f "${INSTALL_DIR}/${dep_file_name}"  # Tails
        else
            sudo -E rm -f "${INSTALL_DIR}/${dep_file_name}"    # Debian etc.
        fi

    done
}


function remove_common_files {
    # Remove files that become unnecessary after installation.
    $1 rm -r ${INSTALL_DIR}/.git/
    $1 rm -r ${INSTALL_DIR}/.github/
    $1 rm -r ${INSTALL_DIR}/launchers/
    $1 rm -r ${INSTALL_DIR}/tests/
    $1 rm    ${INSTALL_DIR}/.coveragerc
    $1 rm    ${INSTALL_DIR}/install.sh
    $1 rm    ${INSTALL_DIR}/install.sh.asc
    $1 rm    ${INSTALL_DIR}/pubkey.asc
    $1 rm    ${INSTALL_DIR}/README.md
    $1 rm    ${INSTALL_DIR}/requirements.txt
    $1 rm    ${INSTALL_DIR}/requirements-dev.txt
    $1 rm    ${INSTALL_DIR}/requirements-relay.txt
    $1 rm    ${INSTALL_DIR}/requirements-relay-tails.txt
    $1 rm    ${INSTALL_DIR}/requirements-pre.txt
    $1 rm    ${INSTALL_DIR}/requirements-venv.txt
    $1 rm -f /opt/install.sh
    $1 rm -f /opt/install.sh.asc
    $1 rm -f /opt/pubkey.asc
}


function install_virtualenv {
    # Some distros want virtualenv installed as sudo and other don't.
    # Install as both users to improve the chances of compatibility.
    sudo torsocks python3 -m pip install -r ${INSTALL_DIR}/requirements-venv.txt --require-hashes --no-deps
    torsocks      python3 -m pip install -r ${INSTALL_DIR}/requirements-venv.txt --require-hashes --no-deps
}


function kill_network {
    # Kill network interfaces to protect the TCB from remote compromise.
    for interface in /sys/class/net/*; do
        name=$(basename "${interface}")
        if [[ ${name} != "lo" ]]; then
            echo "Disabling network interface ${name}"
            sudo ifconfig "${name}" down
        fi
    done

    sleep 1
    clear
    c_echo ''
    c_echo " This computer needs to be air gapped. The installer has "
    c_echo "disabled network interfaces as the first line of defense."
    c_echo ''
    c_echo "Disconnect the Ethernet cable and press any key to continue."
    read -r -n 1 -s -p ''
    echo -e '\n'
}


function add_serial_permissions {
    # Enable serial interface for user-level programs.
    clear
    c_echo ''
    c_echo "Setting serial permissions. If available, please connect the"
    c_echo "USB-to-serial/TTL adapter now and press any key to continue."
    read -r -n 1 -s -p ''
    echo -e '\n'
    sleep 3  # Wait for USB serial interfaces to register

    # Add user to the dialout group to allow serial access after reboot
    sudo adduser "${USER}" dialout

    # Add temporary permissions for serial interfaces until reboot
    mapfile -t arr < <(ls /sys/class/tty | grep USB) || true
    for i in "${arr[@]}"; do
        sudo chmod 666 "/dev/${i}"
    done

    if [[ -e /dev/ttyS0 ]]; then
        sudo chmod 666 "/dev/ttyS0"
    fi
}


function create_user_data_dir {
    # Backup TFC user data directory if it exists and has files in it.
    if [[ -d "$HOME/tfc" ]]; then
        if [[ -n "$(ls -A "${HOME}/tfc/")" ]]; then
            mv "${HOME}/tfc" "${HOME}/tfc_userdata_backup_at_$(date +%Y-%m-%d_%H-%M-%S)"
        fi
    fi
    mkdir -p "${HOME}/tfc" 2>/dev/null
}


function get_screen_width {
    # Output the width of the screen resolution.
    xdpyinfo | grep dimensions | sed -r 's/^[^0-9]*([0-9]+).*$/\1/'
}


function modify_terminator_font_size {
    # Adjust terminator font size for tiling terminal emulator configurations.
    #
    # The default font sizes in terminator config file are for 1920px
    # wide screens. The lowest resolution (width) supported is 1366px.
    width=$(get_screen_width)

    if (( width < 1600 )); then
        $1 sed -i -e 's/font                = Monospace 11/font                = Monospace 8/g'     "${2}"  # Normal config
        $1 sed -i -e 's/font                = Monospace 10.5/font                = Monospace 7/g'   "${2}"  # Data diode config
    elif (( width < 1920 )); then
        $1 sed -i -e 's/font                = Monospace 11/font                = Monospace 9/g'     "${2}"  # Normal config
        $1 sed -i -e 's/font                = Monospace 10.5/font                = Monospace 8.5/g' "${2}"  # Data diode config
    fi
}


# Installation configurations for Debian/PureOS/Ubuntu/LMDE
# ----------------------------------------------------------------------------------------

function install_tcb {
    # Install TFC for Source/Destination Computer.
    steps_before_network_kill
    kill_network

    verify_files
    create_user_data_dir

    VENV_NAME="venv_tcb"

    install_packages_as_root "${virtualenv_packages[@]}"

    # Temporary fix for pypa/virtualenv issue #2350
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv "${INSTALL_DIR}/${VENV_NAME}" --system-site-packages --never-download --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    install_to_venv "${tcb_packages[@]}"
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                   /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-TxP.desktop /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/TFC-RxP.desktop /usr/share/applications/

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/relay/"
    sudo rm -r "${INSTALL_DIR}/qubes/"
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/relay.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    add_serial_permissions

    install_complete "Installation of TFC on this device is now complete."
}


function install_relay {
    # Install TFC Relay configuration on Networked Computer.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_relay"

    install_virtualenv
    # Temporary fix for pypa/virtualenv issue #2350
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv ${INSTALL_DIR}/${VENV_NAME} --system-site-packages --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    sudo torsocks ${INSTALL_DIR}/${VENV_NAME}/bin/pip3 install -r ${INSTALL_DIR}/requirements-relay.txt --require-hashes --no-deps
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                  /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-RP.desktop /usr/share/applications/

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/receiver/"
    sudo rm -r "${INSTALL_DIR}/src/transmitter/"
    sudo rm -r "${INSTALL_DIR}/qubes/"
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/tfc.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    add_serial_permissions

    install_complete "Installation of the TFC Relay configuration is now complete."
}


# ----------------------------------------------------------------------------------------
# Installation configuration for Tails

function read_sudo_pwd {
    # Cache the sudo password so that Debian doesn't keep asking
    # for it during the installation (it won't be stored on disk).
    read -r -s -p "[sudo] password for ${USER}: " sudo_pwd
    until (t_sudo echo '' 2>/dev/null)
    do
        echo -e '\nSorry, try again.'
        read -r -s -p "[sudo] password for ${USER}: " sudo_pwd
    done
    echo
}


function install_relay_tails {
    # Install TFC Relay configuration on Networked Computer
    # running Tails live distro (https://tails.boum.org/).
    read_sudo_pwd

    t_sudo apt update
    t_sudo apt install libssl-dev python3-pip python3-tk -y || true  # Ignore error in case packets can not be persistently installed

    create_user_data_dir

    VENV_NAME="venv_relay"

    torsocks git clone https://github.com/maqp/tfc.git "${HOME}/tfc"
    cd "${HOME}/tfc"
    git checkout development
    t_sudo mv "${HOME}/tfc/" "${INSTALL_DIR}/"
    t_sudo chown -R root ${INSTALL_DIR}/

    verify_tcb_requirements_files
    verify_files

    # Tails doesn't allow downloading over PIP to /opt/tfc, so we first download
    # to $HOME, move the files to /opt/tfc, and then perform the hash verification

    # Install prerequisites before downloading other packages: This ensures pip accepts manylinux2014 wheels
    torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements-pre.txt"   --require-hashes --no-deps --no-cache-dir -d "${HOME}/"
    verify_packages "${pre_packages[@]}"
    install_packages_as_root "${pre_packages[@]}"

    torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements-venv.txt"        --require-hashes --no-deps --no-cache-dir -d "${HOME}/"
    torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements-relay-tails.txt" --require-hashes --no-deps --no-cache-dir -d "${HOME}/"

    verify_packages "${virtualenv_packages[@]}"
    verify_packages "${tails_packages[@]}"

    install_packages_as_root "${virtualenv_packages[@]}"

    # Install Relay Program dependencies to virtualenv
    t_sudo python3 -m virtualenv ${INSTALL_DIR}/${VENV_NAME} --system-site-packages --always-copy
    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    install_to_venv "${tails_packages[@]}"
    deactivate

    t_sudo mv ${INSTALL_DIR}/tfc.png                        /usr/share/pixmaps/
    t_sudo mv ${INSTALL_DIR}/launchers/TFC-RP-Tails.desktop /usr/share/applications/
    t_sudo mv ${INSTALL_DIR}/tfc.yml                        /etc/onion-grater.d/

    # Remove unnecessary files
    remove_packages "${pre_packages[@]}"
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tails_packages[@]}"
    remove_common_files "t_sudo"
    t_sudo rm -r "${INSTALL_DIR}/src/receiver/"
    t_sudo rm -r "${INSTALL_DIR}/src/transmitter/"
    t_sudo rm -r "${INSTALL_DIR}/qubes/"
    t_sudo rm    "${INSTALL_DIR}/dd.py"
    t_sudo rm    "${INSTALL_DIR}/tfc.py"

    install_complete "Installation of the TFC Relay configuration is now complete."
}


# ----------------------------------------------------------------------------------------
# Installation configurations for Qubes OS (https://www.qubes-os.org/)

function install_qubes_src {
    # Qubes Source VM installation configuration for Debian 10 domains.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_tcb"

    install_packages_as_root "${virtualenv_packages[@]}"
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv "${INSTALL_DIR}/${VENV_NAME}" --system-site-packages --never-download --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    install_to_venv "${tcb_packages[@]}"
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                         /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-TxP-Qubes.desktop /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/tfc-qubes-transmitter /usr/bin/tfc-transmitter

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/relay/"
    sudo rm -r "${INSTALL_DIR}/qubes/"  # Listening service only needed on NET/DST
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/relay.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    install_complete_qubes
}


function install_qubes_dst {
    # Qubes Destination VM installation configuration for Debian 10 domains.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_tcb"

    # Configure listening service for qrexec RPC
    sudo ln -sf /opt/tfc/qubes/service.sh /etc/qubes-rpc/tfc.NetworkerDestination
    sudo chmod a+x /opt/tfc/qubes/writer.py
    sudo chmod a+x /opt/tfc/qubes/service.sh

    install_packages_as_root "${virtualenv_packages[@]}"
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv "${INSTALL_DIR}/${VENV_NAME}" --system-site-packages --never-download --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    install_to_venv "${tcb_packages[@]}"
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                         /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-RxP-Qubes.desktop /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/tfc-qubes-receiver    /usr/bin/tfc-receiver

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/relay/"
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/relay.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    install_complete_qubes
}


function install_qubes_net {
    # Qubes Networked VM installation configuration for Debian 10 domains.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_relay"

    # Configure listening service for qrexec RPC
    sudo ln -sf /opt/tfc/qubes/service.sh /etc/qubes-rpc/tfc.SourceNetworker
    sudo chmod a+x /opt/tfc/qubes/writer.py
    sudo chmod a+x /opt/tfc/qubes/service.sh

    install_packages_as_root "${virtualenv_packages[@]}"
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv ${INSTALL_DIR}/${VENV_NAME} --system-site-packages --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    sudo torsocks ${INSTALL_DIR}/${VENV_NAME}/bin/pip3 install -r ${INSTALL_DIR}/requirements-relay.txt --require-hashes --no-deps
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                        /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-RP-Qubes.desktop /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/tfc-qubes-relay      /usr/bin/tfc-relay

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/receiver/"
    sudo rm -r "${INSTALL_DIR}/src/transmitter/"
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/tfc.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    install_complete_qubes
}


# ----------------------------------------------------------------------------------------
# Tiling terminal emulator configurations for single OS

function install_local_test {
    # Install TFC for local testing on a single computer.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_tfc"

    sudo torsocks apt install terminator -y

    install_virtualenv
    # Temporary fix for pypa/virtualenv issue #2350
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv ${INSTALL_DIR}/${VENV_NAME} --system-site-packages --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    sudo torsocks ${INSTALL_DIR}/${VENV_NAME}/bin/pip3 install -r ${INSTALL_DIR}/requirements.txt       --require-hashes --no-deps
    sudo torsocks ${INSTALL_DIR}/${VENV_NAME}/bin/pip3 install -r ${INSTALL_DIR}/requirements-relay.txt --require-hashes --no-deps
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                                /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-Local-test.desktop       /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/terminator-config-local-test ${INSTALL_DIR}/
    modify_terminator_font_size "sudo" "${INSTALL_DIR}/terminator-config-local-test"

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/qubes/"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    install_complete "Installation of TFC for local testing is now complete."
}


function install_developer {
    # Install TFC development configuration.
    #
    # This configuration will install TFC into `$HOME/tfc/`. This allows
    # you (the user) to easily make edits to the source between runs.
    # Note that it also means, that any malicious program with
    # user-level privileges is also able to modify the source files. For
    # more secure use on a single computer, select the local testing
    # install configuration, or preferably use the Qubes configuration.
    dpkg_check

    wait_for_tor
    create_user_data_dir

    VENV_NAME="venv_tfc"

    sudo torsocks apt update
    sudo torsocks apt install git libssl-dev python3-pip python3-tk terminator -y

    torsocks git clone https://github.com/maqp/tfc.git "${HOME}/tfc"
    cd "${HOME}/tfc"
    git checkout development

    torsocks python3 -m pip install -r "${HOME}/tfc/requirements-venv.txt" --require-hashes --no-deps

    # Temporary fix for pypa/virtualenv issue #2350
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    python3 -m virtualenv "${HOME}/tfc/${VENV_NAME}" --system-site-packages --always-copy

    . "${HOME}/tfc/${VENV_NAME}/bin/activate"
    torsocks "${HOME}/tfc/${VENV_NAME}/bin/pip3" install -r "${HOME}/tfc/requirements-dev.txt"
    deactivate

    sudo cp "${HOME}/tfc/tfc.png"                   "/usr/share/pixmaps/"
    sudo cp "${HOME}/tfc/launchers/TFC-Dev.desktop" "/usr/share/applications/"
    sudo sed -i "s|\$HOME|${HOME}|g"                "/usr/share/applications/TFC-Dev.desktop"
    modify_terminator_font_size "" "${HOME}/tfc/launchers/terminator-config-dev"
    chmod a+rwx -R "${HOME}/tfc/"

    # Remove unnecessary files
    sudo rm -f "/opt/install.sh"
    sudo rm -f "/opt/install.sh.asc"
    sudo rm -f "/opt/pubkey.asc"

    add_serial_permissions

    install_complete "Installation of the TFC dev environment is now complete."
}


function arg_error {
    # Print help message if the user launches the
    # installer with missing or invalid argument.
    clear
    echo -e "\nUsage: bash install.sh [OPTION]\n"
    echo    "Mandatory arguments"
    echo    "  tcb      Install Transmitter/Receiver Program (Debian 11 / PureOS 10.0 / *buntu 22.04 / Pop!_OS 22.04 / LMDE 5 / Mint 21 / Zorin OS 16.1)"
    echo    "  relay    Install Relay Program                (Debian 11 / PureOS 10.0 / *buntu 22.04 / Pop!_OS 22.04 / LMDE 5 / Mint 21 / Zorin OS 16.1 / Tails 5.6)"
    echo -e "  local    Install insecure local testing mode  (Debian 11 / PureOS 10.0 / *buntu 22.04 / Pop!_OS 22.04 / LMDE 5 / Mint 21 / Zorin OS 16.1)\n"
    echo    "  qsrc     Install Transmitter Program          (Qubes 4.1.1)"
    echo    "  qdst     Install Receiver Program             (Qubes 4.1.1)"
    echo -e "  qnet     Install Relay Program                (Qubes 4.1.1)\n"
    exit 1
}


# ----------------------------------------------------------------------------------------
# Pre-install checks

function root_check {
    # Check that the installer was not launched as root.
    if [[ ! $EUID -ne 0 ]]; then
        exit_with_message "This installer must not be run as root."
    fi
}


function sudoer_check {
    # Check that the user who launched the installer is on the sudoers list.

    # Tails allows sudo without the user `amnesia` being on sudoers list.
    if ! lsb_release -a 2>/dev/null | grep -q Tails; then
        return
    fi

    sudoers=$(getent group sudo |cut -d: -f4 | tr "," "\n")
    user_is_sudoer=false

    for sudoer in ${sudoers}; do
        if [[ ${sudoer} == "${USER}" ]]; then
            user_is_sudoer=true
            break
        fi
    done

    if ! ${user_is_sudoer}; then
        exit_with_message "User ${USER} must be on the sudoers list."
    fi
}


function test_installer {
    # Test that the installer's hashes match the files.
    # Note: This function is only used as part of the release pipeline.
    INSTALL_DIR='.'
    verify_tcb_requirements_files
    verify_files
}


function wait_for_tor {
    # Wait until Torsocks connects properly to GitHub
    c_echo "Waiting for Tor..."
    until torsocks wget -T 10 -q https://raw.githubusercontent.com -O /dev/null; do
        sleep 1
    done
}


# ----------------------------------------------------------------------------------------
# Main routine

set -e
root_check
sudoer_check
sudo_pwd=''

case $1 in
    tcb    ) install_tcb;;
    relay  ) install_relay;;
    tails  ) install_relay_tails;;
    local  ) install_local_test;;
    qsrc   ) install_qubes_src;;
    qdst   ) install_qubes_dst;;
    qnet   ) install_qubes_net;;
    dev    ) install_developer;;
    test   ) test_installer;;
    *      ) arg_error;;
esac
