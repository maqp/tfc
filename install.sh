#!/usr/bin/env bash

# TFC - Onion-routed, endpoint secure messaging system
# Copyright (C) 2013-2022  Markus Ottela
#
# This file is part of TFC.
#
# TFC is free software: you can redistribute it and/or modify it under the terms
# of the GNU General Public License as published by the Free Software Foundation,
# either version 3 of the License, or (at your option) any later version.
#
# TFC is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
# without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
# PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with TFC. If not, see <https://www.gnu.org/licenses/>.

# Installer configuration

INSTALL_DIR="/opt/tfc"


# ----------------------------------------------------------------------------------------

# PIP dependency file hashes
declare -A dependency_hashes
dependency_hashes['appdirs-1.4.4-py2.py3-none-any.whl']='8e6c1ea544013ea2567cda2d8b8c7b441bc50ac689aa7f95de67e3795aa083e9592c687d74fdbb37f5a75e0beab398fe47df5bced14ee9c204cfe5ecc364ef44'
dependency_hashes['appdirs-1.4.4.tar.gz']='8b0cdd9fd471d45b186aa47607691cf378dabd3edc7b7026a57bd6d6f57698e86f440818a5e23ba4288b35d6bb8cb6eb0106eae8aab09d8863ee15025d300883'
dependency_hashes['argon2_cffi-21.3.0-py3-none-any.whl']='3093f5ae0220dc4c85f741dcd413ba8b19e8b91be7d253c7f2548a1ec9ec99298b2ce7d809be16f497323ffc6733acd35eb201fadd6d91560e41901ed3c09da9'
dependency_hashes['argon2-cffi-21.3.0.tar.gz']='6cb2a075f3bb7040ee7f552d082bfa2f3df0854649d9c84fdfdb42bb4bee2133b8a35a20be2b3c887931efda12fbbb00815d8d88170b7e20b3ca19c86f97057e'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='c3218d723db5c8f2dbc9c737a3ce24d52291a8056b855c6e988956821894b695f2afd50b189a581e9cb5a5d1c13b9b1144be9fb6296a62681b209412caf85b42'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='7a77d7e0becc167b7b348b19d5fc65e25fea4dd93a8e26c203b39f88691515a756a78becfb665a4aa965112a9b561be6c4461fe38db422fe20198b3139d652ff'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='1bd48d7a11cb99cc0d8526b2dc156e025002092d1f7c60632a0470275ade2374d3be6138ecf924eae2c33fb5d29fef16729b710294cc0b8f35f50a7544d17cc5'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-musllinux_1_1_aarch64.whl']='c1f3ede9138689922619a240242a9d11aaf5942058c896be8ddce517d3ebf386767804e93d9dc4055ad04c682560764e9020c87f96f0d949a36e758025d09fe1'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-musllinux_1_1_i686.whl']='ddb220ba4de3b61cefb657776d64ea0351e89b1f6e2eb04664e024f3e0dc46f1cdb11159b79f8cb9d0530c3dbc4bcfb9d89234fff567d53b06e0564ffa46afea'
dependency_hashes['argon2_cffi_bindings-21.2.0-cp36-abi3-musllinux_1_1_x86_64.whl']='96c611449056eccf03f2e2cb5f8b6353ddd9f852c607f2fc6cda5f13bf8f8d554f2679b6c221b2114ff0b3ae5cb9ba841a7fc1affde840f5dcda65eb9c319d83'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp37-pypy37_pp73-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='7097f92df079b66b1d59b699523e2a87f2864e1e3c59bc2a4c71cf5657e6f3b094c62e626009602d1c44f07b5e1f2fc79ab03e916475cde07b6b6c6494e7388d'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp37-pypy37_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='d8556d123fb96046837c6eb9205cb9fdb817f5ec6aa482f9f6ded77a3e67f1b49a21e1273acc0fcbaed7f4bf46b34fd555ec085ffc9a2daea1345186444f7c7c'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp37-pypy37_pp73-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='8940ebaa9466f7810e385d0721042ae9c117480cc659436cd903b5c37af02fd9c9dce8d5ed95fb45ef7305777445cdb8fb00c82671bd577e1eeaf81f2691ae8d'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp38-pypy38_pp73-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='9c77fbaecb073de920ed570cb7c7956a04c904e7e9616badde275791048a487fcd7e85eb6bf79d3f6bba6fdbc398e32cc208bda8fe368a84897b8d35da8e6bbd'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp38-pypy38_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='74f931f3262333e3451295075abbfe0c323beadad36ffe73b65143e906f1e8cab924601a56a3f184ca2516fedcb69dc7d8dc6ea1d0ba25bccb21476a89bc46d8'
dependency_hashes['argon2_cffi_bindings-21.2.0-pp38-pypy38_pp73-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='740c76d800bf8bea95f800457ef03d4125b262d034e4a62e66615144a8abe35950b37fe5627553e5bc448ffe32f77ebeee5e2a04857409f53604fb30de7d8d72'
dependency_hashes['argon2-cffi-bindings-21.2.0.tar.gz']='71d023ae96073ed78599e4f4e42f8efcc985cc329adeea00b14b54eaac1e6a545e6ad9b7f4cfdc60a4e9c396f95053c0ccb6f6f67d92f70265f91315fff4a390'
dependency_hashes['backports.entry_points_selectable-1.2.0-py3-none-any.whl']='758fa1b7ef45b8ebbbfb39996678a3edc5081d2fc6732afc7de790065d5a8e0611b466b93972ae53852d96eb3e62647e9f6f1aea5cf88dcfbde0a7c77557de6d'
dependency_hashes['backports.entry_points_selectable-1.2.0.tar.gz']='de2ff8d5ec54369c8847d4975fd8666f64ca7689aed2c05b7bbe9f1bc1c3816b527786410bd36f6c337e6b57bc04e714e5f77a301828049fa290b65c474c2825'
dependency_hashes['certifi-2022.9.24-py3-none-any.whl']='422ce2c0955b083d9b37b54eba213af7d94a73ea285b92891cc89f7325ce5d964c8896eadbe0b491160486833f2a5cb901853838291ccc1ffadd2f6df54c6afe'
dependency_hashes['certifi-2022.9.24.tar.gz']='513af4266a288e24ffd8f7f6f5277758114538be1a0b596de65df8c925144eea237e7f63f18269a9cb8c1726355c46dca1883db6e18aa3fbb40c070d51dbb360'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='160432f1765330dab76807ec42052cf41cf33922f7b77713aeac0f99af1da8107f1cee85fdc2d13db620a8d21c24423853dd55936204109e429331828e2c576c'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='2c125d6b2cbfca5b3174095a6fe653fa2c58762aca9a9c46024d50ae104acdf10ddac2014ccad58ba95dbe3c4c8c2589a26292f23a28c1ffafb9aff4d60878dd'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='73eb0ea04f5f3c1e9e12a07cdb01b2095f7eb329aaaf9686c40087d8e59944acf4d616b6f774139593de176945ceb510fa86fa546d165bd0a2e8c378c23ad552'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_17_s390x.manylinux2014_s390x.whl']='49ef4f829cd9b8e29964b2e0a96a05f8230a510a6ef78b3f5ad10a04e17f4a6356955325be23d2e770518d6439613ebd3e851874a5c3d0e9831018fdd60fde2c'
dependency_hashes['cffi-1.15.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='35399df0a0ae1e10699d743e11104f0340a3d99621874cbb33594449653baf99b9ba4d633005165d7e70a2282bc46924e08ce4d7e60d17cd1fa30d0b37da9543'
dependency_hashes['cffi-1.15.1-cp310-cp310-musllinux_1_1_i686.whl']='2f75e683e617abbf709328ea6500d4d688078e378f5447fd923f7ec9d1722a9a38292061b762098177d0e12b221437c8970bb8a96b0423c3b55f5c2471f71634'
dependency_hashes['cffi-1.15.1-cp310-cp310-musllinux_1_1_x86_64.whl']='6cb0451be3df9a5d38b26ce6125d6f924811ccc49e6d7019835d7de9a8524cf8764f852fe688d085610d15b6feedec196d00edad862264b3a06d755f58586483'
dependency_hashes['cffi-1.15.1-cp311-cp311-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='9569fe3f3af46c7e19b1bca00684856825bb663adf2cf669980b7c003535d278e05b53ddf85004dae01ab7ec582e721a2c8c6087612da438d0445bfd4ac1a241'
dependency_hashes['cffi-1.15.1-cp311-cp311-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='04fb957a7e40d10461e290b631aeaa02eb9a304ae0397ea5948fdb9de3c8376e2030385fb5bc5696b618659022250bc9a69c4f1b8ef1e637431fbb5d23b26aec'
dependency_hashes['cffi-1.15.1-cp311-cp311-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='d993a2f25c194c16c981583c86ee9de5374cec0602da6f681f655a18c92c51133babbca0c802d02f330009ccab5040bc0e4f7a4cb5cbb05eafa744e93f5c9c3d'
dependency_hashes['cffi-1.15.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='c27677ab98eccac495e34e912c5626eed909b72bf8d21493a3c00bfaaec0af7847d91a97fcc5d2834305e6c3b64fb2e4d84c83f7b6dc27b6a165c9f42bb5ab08'
dependency_hashes['cffi-1.15.1-cp311-cp311-musllinux_1_1_i686.whl']='9911acb9878bbc8c59734839c8cbc164e8f121a493a0589898e1b16df32c41d46d0132ac3a8a36d52cd2f0d857695a8cc6878b5cf6607fb52fad139a43089d66'
dependency_hashes['cffi-1.15.1-cp311-cp311-musllinux_1_1_x86_64.whl']='a8cd7b5b695cb89556a7b5c0d4f7d02325d39cd59bade9e6828717623c98c4a4fd5561366549770fc8e412aba06dd5c0cdb5934a49050d182bc27d0a8b4d5601'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='fde7e4cc649538a32c87bd40cc6f5596d79566c6508e2fa7c30241d68d7bbd51d22b50039910c5a5196f10f4c9d499eeb884367156f156dc8285fc3a1ac103a4'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='0c9980b8f05e7105832ab5e481432f778a09631ce0fd1c09b9582a19f2b08ebd666b491ca97bb718a74feb80d3516998e3f112871ad2838fd4256e7a8eb39ebb'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_17_s390x.manylinux2014_s390x.whl']='d372560553196445c3152b92f4afa011f61aa768825dd63b8ac8b9142481b1b86c97f6f683a92ae0a25e409503ff4ef159c74185dbbfe2a54b22426d9ca991f7'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_5_i686.manylinux1_i686.whl']='9cf0bc15c1d820e45578943222655cc8db8416e01ee825c9b107963174b20f0a0b01fd8277c28d918bcf18eeb5f45de9c1a935210f9c0a2daa5b62f70d747a45'
dependency_hashes['cffi-1.15.1-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.whl']='bf4d6ed94fda20aa7760d2a7f0c1557ddd70dc90a2f0b2dd391bd274d37f09e298b83ff014e6f0820c6b47e70681db94a4197016bc33b89e01f9223f23403988'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='862d68482073f468f60d8f093a9f9b5c78562297f2eb36c84bce283a4a00e897d1731aef67b12b17551e373a668288acd32dcd49031fed5a8c621aa8c41fb0b4'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='36160d9d7c2f138b3cc1debe96365d57b0d204dac9cd7732ee6ab8890d9fc87700a50475336d79d60b26c1656295e26d27998cc3f9f6274613c84a64144c93b0'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='55ea36458d5c3c4a6f9b647215676fe8801704c6facdb65c55f445b4069ed3fdaf155daa8e371ed9f27937f57799e189f7402b945ec70bb85eaaa2f643c70945'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_17_s390x.manylinux2014_s390x.whl']='bb85c0f097eb69d218498dd07f4a40d5bbe280b11062babe64b8d3b9a0df540c42d95e898ee409b14daefdf19c48bc499cec6bb69295d7b6a10dc151fdd6bb6c'
dependency_hashes['cffi-1.15.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='e253ae455ca94f91ee37038c225d395b5668e26772edf26de226ccbb347c3c1b5536a358e023779fc1b06bb6c5717158d6262855445804b1206e07da3a596c7e'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='454522b8eef53c0d17a5eb24a8852f5d6d8360aca2a2c5cc8fca22533de548052ac4556c7cde432592b20f63cec0356be423a4a964ad046744e018821aee4ca5'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='f529bc89cee24cc8db6888df904f5c2bc6a6ee9b0cd52ad03493918936079875fc0968a3f5f1e93306a41e6418d3e60b2b1417c287fc29d0c12951caa0b94b98'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='2b0fba3366eaaf1a88701c5131fe6318e3c89c2969afed5fd2fffdcaea1810b91963dec37b549795267577a4f1697996846e8d027b63835e290c72b3568c8269'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_17_s390x.manylinux2014_s390x.whl']='88d1f27641ecbc51d9c323a19c913818c478d4eb87d27d16426d20eb9727d5d4b23bf9551d842433820068e29082c9b9c2654f38e903b6fc761d70632731c643'
dependency_hashes['cffi-1.15.1-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='7d21ff025e620b024191e0a813a678b3269b582e61944e5677eef4bd94be8456758515288d48b85b3736efb84b9d0d899d60bbf8c5d9e79f943c2b1f2f78f85d'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_12_i686.manylinux2010_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='c76d6e2f761582c4122cec8ecb302fca324b90fdb3ad1442dfd32ab8cee25c6e0519c6556911d5d068229d48578f8c1cdcad4fdfe8bf936ed6038d020633a3e7'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='7866aba126d54d88a0e55c70fc8587773fa1926db1f09c932b58489a63092b2e672f8bd3104d682bf41f250dfce85a824b2616b9f2cf796e020b1ddaabaacf4f'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_17_ppc64le.manylinux2014_ppc64le.whl']='228a40447e3cdf4bebec7286d8c53139f4dea816be3b378dec81ba5e0bb1c20a938564b0b6d34780399f79fce3ba572a5fb5e93dd21dc536551323290ff2483c'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_17_s390x.manylinux2014_s390x.whl']='c637580d319c9960185f44580932996c2554fb0e549d822f636a9703a8e9b8f6e105d765b65e1ef7411320698d05a60f4005b3d590e18c5784d5c8d07d86f612'
dependency_hashes['cffi-1.15.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='95bd8ee4ac5d3f4cb09d5d223dfec484cfc90b82e2eabe40eb3c89217b0f315bee469dee6c5f89bb02e636eefade048e6e709f2b5126eeb634dcb0cb13332fa6'
dependency_hashes['cffi-1.15.1-cp39-cp39-musllinux_1_1_i686.whl']='f5ea1c8a22ed5bfe03586d7fa872dc0bdeaa13ee310ecfd7355ca2a3f742ac6e3b3e2663399acb4220c95cdb92521dc181fd9c7d9da1ce45817a145500cd9243'
dependency_hashes['cffi-1.15.1-cp39-cp39-musllinux_1_1_x86_64.whl']='0fab1b5323e009dd41de28f3f5c9f01dd4ceea627de8bb6244f72394c3fbae6dca8dc65909dce4847cbf8fd3654b55b55caa194672652a253bd0fa2a1b112f78'
dependency_hashes['cffi-1.15.1.tar.gz']='e99cafcb029076abc29e435b490fa0573ee2856f4051b7ca8a5b38cd125d56dd9dae8b189f59ceb3d728a675da8ee83239e09e19f8b0feeddea4b186ab5173a5'
dependency_hashes['chardet-5.0.0-py3-none-any.whl']='7cd0bad8eb90218cf6ffd85a8b049b0016a0fe3df3d1f66062244d827d3a915d17b949408533296b55cd318d77fcaf732f39aeb1341a1ae08e287f09770e1a27'
dependency_hashes['chardet-5.0.0.tar.gz']='3853248584d53d977abe0e6ab856e1526fd7360d9b94b4f08d03895da80ba9efac8882dbd3f919f0d52b0699c0d7fd68edb223c37512685976c6f2b212fbe0ff'
dependency_hashes['charset_normalizer-2.1.1-py3-none-any.whl']='fe2f3ae5d3c011b314a057456a7b13ba957593b22dbe7f532f9fbe077103e75b3f8b631fb1e2a4d5875a60af678b6779780eff7df0ea7c08144aa88fce34abc0'
dependency_hashes['charset-normalizer-2.1.1.tar.gz']='f52abab683ebda4100d67ec6ee0349713baee453a742d60a1356f405c5ce2c3b4d850b0891527f08f92fa1217d59c46d6b181dc4ff1b962ce60d9c5ef8c913d1'
dependency_hashes['click-8.1.3-py3-none-any.whl']='ce7e25725b3edfd0f336f3ebc8ace3977539f0d063f3439c4a1af517263cc1058cd9c0f687819ba319811dd0f376148372444dbaf082797d1dfe2c1c1c856dfb'
dependency_hashes['click-8.1.3.tar.gz']='be5b0c8b72ef7c10854f31406668ca4d6f826381deff10bb6a87a406166c09af97e2165f1327094d96abade15efb872892af37f20fdbc855b659cb2c7bd2f2c5'
dependency_hashes['cryptography-38.0.3-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.manylinux_2_24_aarch64.whl']='7c1786877272f522f1e8115d6e68006d5b2999dbc06e20a96a84923c385ead9aaaba483a8ccc0c956162279cc6675aad5e987024e6ba6e57190b28b049ba712a'
dependency_hashes['cryptography-38.0.3-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='ecbdf1bf7395fff92daca9207fb72912e28d5d1b10dbedfabeb35ee6f205d1b5f579e546e61e2cb9a6ee0f1a4d1229d10224ceb7efed8b771d8848d90c1ddcd0'
dependency_hashes['cryptography-38.0.3-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='6bd8bf28831e4aeaef0aca82193c297cc5b4381ed0739fb367ec511c6cbb02291ba964410aea13517eb52bfcd4fc6cd68f839954e7a863adabc750a9e05c8c60'
dependency_hashes['cryptography-38.0.3-cp36-abi3-manylinux_2_24_x86_64.whl']='b185ffc114b60e48c140c96b3e2ed88d3d17554dbc69bf8f1f633ad55e61184de70e0aa4a8a81a0332adfd3f8c6c5cba70eb730cf2eab6693070f4d5d0a1b426'
dependency_hashes['cryptography-38.0.3-cp36-abi3-manylinux_2_28_aarch64.whl']='78662aab44379acaca8b69d76857ce1b5d85a3529b4003bab9b0468e7eda04f14009fb8b858b4bb169f4b17fa949941252db9af996bb030c03a8f60835aafa85'
dependency_hashes['cryptography-38.0.3-cp36-abi3-manylinux_2_28_x86_64.whl']='5d7643f6c4622e2545e6ebb9e0c34479a1e8009fa4520896abb8ce76de6605e8b361e6ef04360e07fddef8bc56c97ce037d35d55ad534203453cb866423950d2'
dependency_hashes['cryptography-38.0.3-cp36-abi3-musllinux_1_1_aarch64.whl']='9415ca7e6ce6b65336b3b2e63fe52ff17a7afab6da576c73ec8eacf4c3ff6e7af12ffa33df232d677f24facb8295453dce67e794d086393660411b2445de9a7b'
dependency_hashes['cryptography-38.0.3-cp36-abi3-musllinux_1_1_x86_64.whl']='a312db208f0251b78afa1017c315bbecf6ef33fc83afb96d7cdd6cc4dfd91493a14f0229ca58adb68f248bd50c09e636953cdb2528306b0687f2cdbf143ab05f'
dependency_hashes['cryptography-38.0.3-pp37-pypy37_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='a167f7b9318e650b71de9ac8666eef9d586ba8795b83bb1d54ec153b31bb75884f4f9bdfdc1861d01a537c265fd385e38a82b24778dfbfe26801c5522d0ffab0'
dependency_hashes['cryptography-38.0.3-pp37-pypy37_pp73-manylinux_2_24_x86_64.whl']='58721c89535481d322597e369695ae51739e2f3bfbc457dcc4f45becda6bf22fab97c05f9d4942d3db7517acad32c6900f4e4768010efabf60be3ea0709f1d26'
dependency_hashes['cryptography-38.0.3-pp37-pypy37_pp73-manylinux_2_28_x86_64.whl']='05dc3144e6c4ca253a293e715cb58eb5695fb9d9519181d3f1f0b01d32e9f229b8abd7468d4bcfbef40990fae5dadbf3fdb58e0f38258e14d1ed49918ba76ea2'
dependency_hashes['cryptography-38.0.3-pp38-pypy38_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='ec592673ed79bf98634778bb7d81f93d0e495eb1bd192d8fda8243558a2b6332f667956d59e99f39b9f2545c5871152ca8aea20266b8e4d0f5d6b0adc6107606'
dependency_hashes['cryptography-38.0.3-pp38-pypy38_pp73-manylinux_2_24_x86_64.whl']='bec86f29008d8f721738cf92cdb7ed7091c03f29dc527d88eefac28d2d908cbb031232d349dde1e9dc189de5ad189c0a5e6c0399bb867f9be2caedcfbab149cc'
dependency_hashes['cryptography-38.0.3-pp38-pypy38_pp73-manylinux_2_28_x86_64.whl']='37011ac12b880008d506948252cc45442f0b73173353545aa68275668363cfbe4a45d0d8e28b56456e409b30bdc1f61c126794592e55a8f14181b122c4c57d5f'
dependency_hashes['cryptography-38.0.3-pp39-pypy39_pp73-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='60aa740de00564f75c46f2656bcff7902f5c935c6c622c871a4aedc53789a0e84623fe26b1bf34082095510e6cfa6c9bdbd87cde385081971888378d60107f6d'
dependency_hashes['cryptography-38.0.3-pp39-pypy39_pp73-manylinux_2_24_x86_64.whl']='1add30d5640201aa5c6a064af3ddf9dadf08504932eab16cdf76c62e57ed11280537c06e3a2d6e3ba5f28337160cc6aedf96061207e686cd044989b3d482c1b5'
dependency_hashes['cryptography-38.0.3-pp39-pypy39_pp73-manylinux_2_28_x86_64.whl']='6f42c5fd38365658e4039956ab2325ce8f4d2a13edd65fddd6d52231777d0ad12a65e5b7a3434c998e3c44267f6a39ff0cf99748035485c66e93c6fa0e79f3a3'
dependency_hashes['cryptography-38.0.3.tar.gz']='f133d83266f386cb0169a3cf2226d258b7d599e7aaad9913f8a4b01ee0841670586a21cee93fb4d4d9f61b0da53109c5dbcf7d91d470cfbb166aa04f4a1d7634'
dependency_hashes['distlib-0.3.6-py2.py3-none-any.whl']='7046ad8707013371b68a805fb437e7f29d883694d6870012f2db197f8bdf472aa262d5e549852c4dbccbd5af5cb0a402d60f8cad845e43df9429a2c437e28187'
dependency_hashes['distlib-0.3.6.tar.gz']='27f3a59f9175a92befb9a65a66cd0b8eb65185dab6fa13ef94e85ca69c2bc1b7281ce1522601034007cb98677ba9237a46224df4adc70ed966db7e131e073636'
dependency_hashes['filelock-3.8.0-py3-none-any.whl']='50b2529305be50e9f1e1faf3a2d38133f65d71b15aed767b167b48350487fd4d83cb03e1a6b460362d34b6d5a8fcf2014162d8626ae513a4a068e804a63d3894'
dependency_hashes['filelock-3.8.0.tar.gz']='95fb4d420a316199a658e20f385d5eec9db9398a78803cad581f73efb136d2935308a04b1bcf6cebd71a8601f72d006a491937664ec0b70904c305c5796a4bf1'
dependency_hashes['Flask-2.2.2-py3-none-any.whl']='d62d8b20d59c0ceee13538ca85c23581491c7686ceb53cc11e518e9e92f500369d87a09ce80804de193d501b6122592d40f3600bb222fec77f47dda78f5b2d82'
dependency_hashes['Flask-2.2.2.tar.gz']='d330398829cb0393e07a4dcf495a3939f0e8f7962c0a517fc866d333425dffe1ce8fd26e39a40445259028d46eff4566e97b3f5eba0d6bddf14b9d7bac138945'
dependency_hashes['idna-3.4-py3-none-any.whl']='ffdd45326f4e91c02714f7a944cbcc2fdd09299f709cfa8aec0892053eef0134fb80d9ba3790afd319538a86feb619037cbf533e2f5939cb56b35bb17f56c858'
dependency_hashes['idna-3.4.tar.gz']='4060a9304c9bac04efdd0b97ec8f5aeb7e17417e767bf51c5dfc26605edad25ab67456cf6f6a3c5a9f32b8247e46f6343edfd8a6ffbcd6d1075c71e66d089d6a'
dependency_hashes['importlib_metadata-5.0.0-py3-none-any.whl']='c06b3295d1d0b0f0a6f9a6cd0be861b9b643b4a5ea37857f0bd41c45deaf27bb927b71922dab74e633e43d75d04a9bd0d1c4ad875569740b0f2a98dd2bfa5113'
dependency_hashes['importlib_metadata-5.0.0.tar.gz']='29efd04c819bf2e6579f5b0ca0cf63c907e162d028244a743929c7c04989a29b84003824aaf2f2bec33867268b3106048380bd18789c790ca2d1cd89a9f678ef'
dependency_hashes['itsdangerous-2.1.2-py3-none-any.whl']='190df7f250b5e5985898a7f0e0e9d4c3d0b5c391268b9b5ad0f39667ec887b543651dff7623ba49e191ffadb42b0354b21be19ef61a1f68193924bf12034dd1d'
dependency_hashes['itsdangerous-2.1.2.tar.gz']='e4d870a33992b309ed778f403c0c1e098983a693d1165260748bf36385ebfadb583811e05ddd48001a33cf6a4e963b7dd8a8c68919c5b4b86f63621d8869e259'
dependency_hashes['Jinja2-3.1.2-py3-none-any.whl']='00558cca2e0ac813d404252f6e5aeacb50546822ecb5d0570228b8ddd29d94e059fbeb6b90393dee5abcddaca1370aca784dc9b095cbb74e980b3c024767fb24'
dependency_hashes['Jinja2-3.1.2.tar.gz']='5dfe122c1beef5305b34d25f22f96607bd3a6cba098b03091850ea36fefe62b645a7218d7584b35bea252393ac922c9bb3654a9e90f23bcfb273e811fcf2f2c1'
dependency_hashes['MarkupSafe-2.1.1-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='efb6cdb81d325aca18c959d41a67b3a749ecb3bc4e558b50bccfb2a8e4924630d3bb3b6d409563644df93a632cd2c4f85ffbfd0c017d00b04333d14d1dd11564'
dependency_hashes['MarkupSafe-2.1.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='28f5696ab9bf80e7a0642ae13c02f6444d86cd36f42b711aa391147354894932d6ccbb530f6843a8051b1a35dd61c98ad2334620187e0720d789609102667c53'
dependency_hashes['MarkupSafe-2.1.1-cp310-cp310-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='520795cd64867914a593ca88eb64647f6b8851183fc952985f007bde045a203d200e47197d62987f733083513b068da8bcb10b3784d72505126f34cc455c3d53'
dependency_hashes['MarkupSafe-2.1.1-cp310-cp310-musllinux_1_1_aarch64.whl']='b9bb2596f0e60c3c7dbb2b53c97108893818f59f384ff657ff0498ca81d2e7e217c5b1a71b7403239cdf1993f0ab662f6ea4373ffbf20712ef3cfd222dbe1a52'
dependency_hashes['MarkupSafe-2.1.1-cp310-cp310-musllinux_1_1_i686.whl']='d847e5ba15e748ca64287c099c5760b067710729d5f70ecb58eae64f2b36fb68b324cb311dd9482c3ade7d4f055c895362b1cdb6591dda6bfc7fa251db018193'
dependency_hashes['MarkupSafe-2.1.1-cp310-cp310-musllinux_1_1_x86_64.whl']='b96b31a8079aa102aa35c80b5be0de5bc29bc08c2e232c455b531fc4b4291f9009073cdf8cd21f20f3e033f20351641807cfd0a58af8722429982728542a7ce1'
dependency_hashes['MarkupSafe-2.1.1-cp37-cp37m-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='14db30ef8f6d6c309efd6401ac8b58d95d795ca8df1d6e32ff580207249cbfe6e194e731a6bd214a37692afccb1efefbcff65c1a11ee9cd3dc637eb2f3f45916'
dependency_hashes['MarkupSafe-2.1.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='e30f38680270b08d060a941bbd2bd71e1a69ee56f451edd38927e8411b3c3e03fcab9a85c432d555495cfb7470fe4b5d061ecc190bc66994bc700a370e9138e4'
dependency_hashes['MarkupSafe-2.1.1-cp37-cp37m-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='67eccfa67c6af21088e04a9c732078bf8f902eee327e51ab5db8ced5e1ecce8e2029f5699166249eac5fa1d432113de064eb1e45b1cbd542b9a70baf446162d7'
dependency_hashes['MarkupSafe-2.1.1-cp37-cp37m-musllinux_1_1_aarch64.whl']='d30a01de848c4c1dbf21dc5f5328d7ff81ee86375ef6db71f6fc37ebb3eb76c1f9ef7c1c28bf16c9960ac171c4768122e430bfa15333268f135d3f33dccab202'
dependency_hashes['MarkupSafe-2.1.1-cp37-cp37m-musllinux_1_1_i686.whl']='04a6ffecd43b9da63e7002b5a79068daa2749f46a093a2fb8d13ff720536006732a99480075806ec8953b70e0d5aa6c345a5c62ef066b09e3b148668f9aafc01'
dependency_hashes['MarkupSafe-2.1.1-cp37-cp37m-musllinux_1_1_x86_64.whl']='d1080481b86770d29dab97954e846a4508e702d71dbae632ca017ba8e406d9f7425d15c91141c148a94df62b02dcf3d6f07fba2b23b0322ce8d464c541505cf6'
dependency_hashes['MarkupSafe-2.1.1-cp38-cp38-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='b4822e17715118aa6e91f2cf162d000cf9f50332dfda7dde0faf7759d9a6d6e1c0baec166c5dbd22e05f238ead7ae5bacd684b1cfaeb3b2d1dcddda1c2665a63'
dependency_hashes['MarkupSafe-2.1.1-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='7329b15a5e9bb664404728248912ba6639c68223f78af2a19bffc6a0421f7de8b1f9c94f12ae9be8e1f982272414746c048ad4754168673c6b61a702e4fe0f33'
dependency_hashes['MarkupSafe-2.1.1-cp38-cp38-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='45062ba8578d4491ba0ac6001cb5c6de309e8441f7f84ffda8a9832d7db897236f71670fa43e7b9ff9cbd2fe9d291125fd701b3f979ebe222df43c288412d187'
dependency_hashes['MarkupSafe-2.1.1-cp38-cp38-musllinux_1_1_aarch64.whl']='e78729072d14312e2080a446d4d263fa3d6c7573e26f1101e0a6f918eb8098ad67919a4c978911f50af841cdc7291073c5aabca288f1b494be5ac62696ffaea0'
dependency_hashes['MarkupSafe-2.1.1-cp38-cp38-musllinux_1_1_i686.whl']='985e40ac643eb5b2bc60a4e9e45e8199a08c3044b06db2e32d5ed1fbf3026ab1a11ac2627f35a8ba36337a21eac34a438aa2eb559df3bee4969847c9d692045f'
dependency_hashes['MarkupSafe-2.1.1-cp38-cp38-musllinux_1_1_x86_64.whl']='ed90ffd217bcfa2bc071b0d7ba1bc6c73235fbcfce9d75260e63e8d4dc249ad21623b573e414c70ff62f4fa36131e4db35af359c1ed7fcdd628c7571a7c8942f'
dependency_hashes['MarkupSafe-2.1.1-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='3577ed92200321a5172c84a3c231fd240964094e242b4ebd3a8097dc310cec227e90179650f3def3d4bc476042ccb86ff5f5c55dae4ea63520ae28b74840c5a1'
dependency_hashes['MarkupSafe-2.1.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='cee65ded08fd20e3582c43f643fbc4f67b8c49c9e9c013ccfcee8e8e84e102545ad539200356c83ead2d78405719e177f52d00837602e932eaa8072643fa711f'
dependency_hashes['MarkupSafe-2.1.1-cp39-cp39-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl']='3c86b0149dcbec564ab4fe8b8cafef8643a121e5e5e7ab97f0d946716fc33978b1a4594748be52ef50eab9dbacc9bd7b94af4348b0acdb64f59fc29ebdbf5d52'
dependency_hashes['MarkupSafe-2.1.1-cp39-cp39-musllinux_1_1_aarch64.whl']='f3695f053cfde58e1c11105c76e521911b63cbd6365519f0ab352a1794c902bec68b84e3111f9bf3ac283ef0ac353667801aee43dabbdeffbf09f3694142005f'
dependency_hashes['MarkupSafe-2.1.1-cp39-cp39-musllinux_1_1_i686.whl']='133e313fd4aac1bbaaa9ed4e5dd246da4d79bf8d5f23f10eb833f2dc268bf3dfa4f83946b2eef171a62de2607050439bb0273bd83dbe0591bd585162a61e7e45'
dependency_hashes['MarkupSafe-2.1.1-cp39-cp39-musllinux_1_1_x86_64.whl']='7c0cec6c649f9d522569b47bf24fc2a09644ccc71250242b1c2edd0b751c67471a3f5c7e77a2d4055fb15c3b2e14ff2f435ff7150e49fe76a676f1346e5cfc94'
dependency_hashes['MarkupSafe-2.1.1.tar.gz']='1d9bf55614b4e0aeca726ebda7bab2829452212f03f2295efdd0340f3dd05eefc9733d6dd0e37f0d06a432ce00ed7d06b28c9e817fc25212675006577f468b3e'
dependency_hashes['pip-22.3.1-py3-none-any.whl']='f09c2a48e85108514c20fdc58466b9be6a9b7f234241ccd46e23249f690bd1ec03fa5e60c9df80f4cf31a9be64d7d59b2fa786c1d7779e284fec42b04bffc257'
dependency_hashes['pip-22.3.1.tar.gz']='5bfba1eb6bd444d1a57dd5a9f03b95fe64ec27f238774d59a3b21a206a47390a9dba9ce44da50fb935f45ed23dba08ab9a5fa94cb1e67e420bb68b72abb4ef61'
dependency_hashes['platformdirs-2.5.4-py3-none-any.whl']='b749aa34aa892549e3d85ce21a2ec0f7b26977c299b16426529447c12b8220ca65503d2b38cfe41bf07cdd51344cbaf7011e24f1eb1311c5830de76e39dfd612'
dependency_hashes['platformdirs-2.5.4.tar.gz']='1b7ff79a421bc0b0320a9b1ba8f99dbbecd34a9bea7fa7696b58007f2e05d8a910a3f32e2c03e6e3a8f3d272ab1c045051a682e3155c5bc5285e66e4add59489'
dependency_hashes['pycparser-2.21-py2.py3-none-any.whl']='aae67923f45abd1d781d03e0ce848627a07e9cf4c61a89bf32f1b5f638ceda08de39a038c46ed29d2df967d76be4f2572346bad087ac32b418e6fe654fd28e43'
dependency_hashes['pycparser-2.21.tar.gz']='e61fbdde484d1cf74d4b27bdde40cf2da4b7028ca8ecd37c83d77473dab707d457321aecaf97da3b114c1d58a4eb200290b76f9c958044b57e5fed949895b5f0'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.manylinux_2_24_aarch64.whl']='853446c38ce5488e18eba166f67650bc4f50044f509987ad2ae4830d2ed85284f057c3a4304180ad265bc33fb9cd6570488a37e40bade5e202ba201ad368af84'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_aarch64.manylinux2014_aarch64.whl']='d3f24397a6a3a7a56652a56c8e8cfcb1ebc167b0d2dfc38c450d8fbc363b2b5c1226e58724a692b16a7e4f1022bb93e904664ff54640bba28720134058e2275f'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl']='c3502047add3590c1a1e60908e21d62455e2b4ba2f2efaf0f5118bf915934de9604d00036b3215ed54890a51a088872909409b296141d6241159c119d751a947'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl']='01d38ba9cdebf0cc658b187a753f63065cea29ca757296cc1d40da4c2609b8cf96a1df1af7bb75bec61af767cee4ac6a20aa858ba060b4c61807800e57e53fe4'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-musllinux_1_1_aarch64.whl']='61e07a421705e5c1613cbc888ff594d7e3457090e9654280f2b6e54a84e5d6dcd56292fd3c47b86a59be6eecafa8f17ad5d710f45b7fcda9f57d9c7343328bc2'
dependency_hashes['PyNaCl-1.5.0-cp36-abi3-musllinux_1_1_x86_64.whl']='9720cfe64e70667804c197a1762db2985bf5893ae774418f50da9a3d31135b8935fd497c5fe4f92909f6e0ac70e3c5dd57f6322ab780d29b12741c64c0d2c007'
dependency_hashes['PyNaCl-1.5.0.tar.gz']='cea3e4556432588630382abae6debf9203c7f55da286509da547a7921e4dbad98c915743625c68e5f7187fcaf6d4cdaf7ed2ed3ba60bd4c10ae6e3f88608dc65'
dependency_hashes['pyserial-3.5-py2.py3-none-any.whl']='29bce14c59e60f54ce476d919c9b9477190ef6bb44a6102f71345840f5c0f1d0a323c4c3c302c5f380bfaae32cf04142ee528b6dd7184f17789632a31d5ecab6'
dependency_hashes['pyserial-3.5.tar.gz']='c8df5e50d952d5a6dcf1d9253a6ba953e9763c545a867da66c22c90dfa015aba0194f2a8f29a229d0a5f4dc8bfeeaaab8bcfda4066ed78a18b151bc05e6ae327'
dependency_hashes['PySocks-1.7.1-py27-none-any.whl']='3e0b1775c14fe091d10e30b03f7f0c770861152e493cf3a3143b0de01aadbc73f684f0d4305f1a694932d4bdcac8056c422437130640e19028cd9fba59ff0b3f'
dependency_hashes['PySocks-1.7.1-py3-none-any.whl']='313b954102231d038d52ab58f41e3642579be29f827135b8dd92c06acb362effcb0a7fd5f35de9273372b92d9fe29f38381ae44f8b41aa90d2564d6dd07ecd12'
dependency_hashes['PySocks-1.7.1.tar.gz']='cef4a5ce8c67fb485644696a23bf68a721db47f3211212de2d4431eaf9ebd26077dd5a06f6dfa7fde2dcb9d7c1ed551facd014e999929cb4d7b504972c464016'
dependency_hashes['requests-2.28.1-py3-none-any.whl']='c6f13c11fe91caba7e152792f45dc9bfe2cb544d713521b27e46f1b1e9df923f386d860b9343fb3b5a3bfbd4b50c80591e8f7c7380160189a2eaed9830d5fe9d'
dependency_hashes['requests-2.28.1.tar.gz']='c123ec07171c2c7c34e4173b97750adfa313b4312d91c0d58e4eb8750361604017e5b370c23ec886d2cbf704f9074ec5ad0fa9c2cd8e6f9521532adafff39d41'
dependency_hashes['setuptools-65.5.1-py3-none-any.whl']='8fe0472001b1589caf81f1e0fe17777e524f003fc414d0a17a431209ba5aa8292741bdf13ae4346227afba2491099ea7369bf767ce621ef3fa38dda7b304b5c0'
dependency_hashes['setuptools-65.5.1.tar.gz']='e75eb7fdb0bc5ffdc76ed864cf753c2672d097a60f8747ac5cd40a49276d33df31fb619877234b4c22693b627d9978ecdd48a5c6c48aa0bbb856d48dec70fb0a'
dependency_hashes['six-1.16.0-py2.py3-none-any.whl']='656b010ed36d7486c07891c0247c7258faf0d1a68c5fb0a35db9c5b670eb712d5e470b023ffd568d7617e0ae77340820397014790d14fda4d13593fa2bd1c76f'
dependency_hashes['six-1.16.0.tar.gz']='076fe31c8f03b0b52ff44346759c7dc8317da0972403b84dfe5898179f55acdba6c78827e0f8a53ff20afe8b76432c6fe0d655a75c24259d9acbaa4d9e8015c0'
dependency_hashes['stem-1.8.1.tar.gz']='bad2f4f96e37caa3ee2928bb027318c4941ca3f6c0072c5f6e87fe647d2b68400ad352d9c27fa2a35c00f4f327aa9cc00e2907b21a9cbd26fab46ec21e2a038a'
dependency_hashes['typing_extensions-4.4.0-py3-none-any.whl']='3c5adf0a36516d284a2ede363051edc1bcc9df925c5a8a9fa2e03cab579dd8d847fdad42f7fd5ba35992e08234c97d2dbfec40a9d12eec61c8dc03758f2bd88e'
dependency_hashes['typing_extensions-4.4.0.tar.gz']='08286e3c997ba911570725674634bcfe3dd8ab14c88e61d8adb47755389050e714b9e87e4906c3bbcc3bde987024efcd8c4e1d2d312347fd89a4b55becb4b341'
dependency_hashes['urllib3-1.26.12-py2.py3-none-any.whl']='f391145925973e63003830ae9df0ca5335d07f807ddf9e50dd27358684c4cec73bd2b07adc695a91b6c626631abd564241efbb9c59190696d4a39aade6cfde9c'
dependency_hashes['urllib3-1.26.12.tar.gz']='c34bc2cb92ff5fb4e27948b6b8bf286d1f3993d8e399a7dc99e8c1cb07b364f16f9c8d6fc3e5e22e6f2d9285454a945174a9a1de3cb0fcf08e673ba316bc5469'
dependency_hashes['virtualenv-20.16.7-py3-none-any.whl']='e7e32d88d5e5054c5f69f5ed1ec69d385337435ca3a37f43e0cb7f1e69e8c5a3d111efbc8f987d83c93eabc46f7f94c89064bd4cf9459fe767023e7730155e63'
dependency_hashes['virtualenv-20.16.7.tar.gz']='975298181696c4636a9567c29b4da5bad703d35fcf2a110cc24146e5bf7afe63b3fcb1f1601586b03bc0deef08c2278577bedf40cb21a7e07841986a9215dc69'
dependency_hashes['Werkzeug-2.2.2-py3-none-any.whl']='989e259788074a794b3b0fc33fdf066fef45014fc15a743216c98ab59f64c96766db02ca69e3753e39e280476ab57f7f2d2415fcddb95bac13ea9b916439147a'
dependency_hashes['Werkzeug-2.2.2.tar.gz']='b37a63ba1d6970b10ba17b87575c2d030ad6c4c00ab50669d678297b9801e319f4f81f98bfc2d89fc2e645c5e192dd81ed2d653c03dbaef06565de0bdac2bcf7'
dependency_hashes['zipp-3.10.0-py3-none-any.whl']='ba91ab0518c61eff13e5612d9e6b532940813f6b56e6ed81ea6c7c4d45acee4d98136a383a25067512b8f75538c67c987cf3944bfa0229e3cb677e2fb81e763e'
dependency_hashes['zipp-3.10.0.tar.gz']='2e64b05eb0123eb3c3c87fbfe2da26721eb9e24142a43e794d04e5f86ab5fe4cf3e0e3e3497bfc9631ab61dd64226829772493f26e091a66148ddbdc5dfd8e51'


# ----------------------------------------------------------------------------------------
# Package lists (the list must be ordered so that sub-dependencies are listed
# before packages that use them, and the list items must use the same capitalization
# as the dependency filename).

pre_packages=("pip" "setuptools")
virtualenv_packages=("zipp" "backports.entry_points_selectable" "filelock" "importlib_metadata" "six" "distlib" "appdirs" "platformdirs" "typing_extensions" "virtualenv")
tcb_packages=("pycparser" "cffi" "setuptools" "argon2_cffi_bindings" "argon2_cffi-" "PyNaCl" "cryptography" "pyserial")
requests_packages=("urllib3" "idna" "charset_normalizer" "certifi" "requests")
flask_packages=("Werkzeug" "MarkupSafe" "Jinja2" "itsdangerous" "click" "Flask")
tails_packages=("pyserial" "PySocks" "pycparser" "cffi" "cryptography" "PyNaCl" "argon2_cffi_bindings" "argon2_cffi-")
tails_packages+=("${requests_packages[@]}" "${flask_packages[@]}")

# ----------------------------------------------------------------------------------------
# TFC Source file verification

function compare_digest {
    # Compare the SHA512 digest of TFC file against the digest pinned in this installer.
    purp_digest=$(sha512sum "${INSTALL_DIR}/${2}${3}" | awk '{print $1}')
    if echo "${purp_digest}" | cmp -s <(echo "$1"); then
        echo "OK - Pinned SHA512 hash matched file ${INSTALL_DIR}/${2}${3}"
    else
        echo "Error: ${INSTALL_DIR}/${2}${3} had an invalid SHA512 hash:"
        echo "${purp_digest}"
        echo "Expected following hash:"
        echo "${1}"
        exit 1
    fi
}


function verify_tcb_requirements_files {
    # To minimize the time TCB installer configuration stays online,
    # only the requirements files are authenticated between downloads.
    compare_digest 82542c9edf5ae3a3fa1ee0211c7172a8909ad1ac3f897a2eb38c13d1241c210b6ad6a35aa79698a2fa0e3660e0fdf8ae01deb318da94a8ed7c232e0ec03e58c4 '' requirements.txt
    compare_digest f33d3f1cdd5dc1b662270c722c6aefdb35987cc13216e6167c40bc75fd62e4bd6b90b17b8a060aae8f37f8d4d734e6ea5abec6f28aaf5a31763c737dfe50b216 '' requirements-venv.txt
    compare_digest 9d95ca9a0d1e659a8c7c658ef083f68171c11341896dcc4a0360ce0ed0369d2b24ca3da812cd992ee2594aacd98cea966772d0bb9e2dcebba7deef32f923877b '' requirements-pre.txt
}


function verify_files {
    # Verify the authenticity of the rest of the TFC files.
    compare_digest 53c9081940a16b4029c1c8394b453a56278a5300f511de1e1f40346c7979e36595a744eacf37bfc705872c3703bca52b0a4ef26ed18a3b6b9e7187257f0691d1 '' dd.py
    compare_digest d361e5e8201481c6346ee6a886592c51265112be550d5224f1a7a6e116255c2f1ab8788df579d9b8372ed7bfd19bac4b6e70e00b472642966ab5b319b99a2686 '' LICENSE
    compare_digest 86b1d7b2b899770483db804d4fb4cc99d77267650e9394abf7b07df7166d10e3ec56f14c730d0f2c91597fe1f7539ddc4cdf652ffae478c1bc407bcc78818ebd '' LICENSE-3RD-PARTY
    compare_digest 8d7c56d20c129ff1a9b497a4816027002d1622439fbfde803ca61ae34098aa81ba9159663c461524a802ce8fee689fa2f6fcb37409fd959c1fb442f9c08c5622 '' relay.py
    compare_digest cab1bfef09c4c59760eeb6b7a481d01e46ff7e87fc3fa0fc794272197100b6f45ec525aad712cd6f266fe17cd6ed3088da09e87351d45b1a152f520f554435c9 '' requirements-dev.txt
    compare_digest ff0629e6a5e29f38c8bafa62730c5fc9c88b56209d5c4a3cd68ce28c57c88140894461e485202923813811a5a9bc3332dd186528a2eccb1c82caf3706fef1e44 '' requirements-relay.txt
    compare_digest b9b4519d2c8b0ba46f95ea30e83a378f724e442ca638604685f42db579c508086794e4ba2b9a8396527f29eeb24595f6d866c2211c54dc9effe0e3d4db097217 '' requirements-relay-tails.txt
    compare_digest 79f8272a2ab122a48c60630c965cd9d000dcafabf5ee9d69b1c33c58ec321feb17e4654dbbbf783cc8868ccdfe2777d60c6c3fc9ef16f8264d9fcf43724e83c2 '' tfc.png
    compare_digest 68de4f8c8b055ff9488c115d5e26aa0e23466c7fda7519c89ac7fc93f93f35a84e02cfc50f72af75a7bcff66138e62be1446d40ed94272017e8fd673cf3f5b9a '' tfc.py
    compare_digest 15a20bbe1fde78f13f92bad918752e34a67ca14501ae2348a7e723b4c61037acc991adfae1100b076a0971b4a5979600fb89a9c1170f4207d048b77d0c97a43a '' tfc.yml
    compare_digest 400b567ab4b428377aef7628486f6eee39c554555cadbc929b60846f96d112dd1426d05d77e5d528c2d260b5d99e01aa77f3b3fe42b3829d3a07b3e425057348 '' uninstall.sh

    compare_digest dd2dc76c186e718cd6eb501985f3f8c639d303e44186c5f21ca8e8cf6a25b329c573ca489eda80877be51ccaa6b72b4e763060d0f0f27c0217e8c6b1016d75ca launchers/ terminator-config-local-test
    compare_digest 702a72e0c5e9781d7348933134eb1315c52afc76709b9c9383fbd641cf05ffaa79d20f84128b5ca8ed8578a96e61010983ce1b09cb4d6511a79cd4647fdae8b3 launchers/ TFC-Local-test.desktop
    compare_digest 960f9fdea0e984cccb8d3b8aec76835e41c835643edf4a586961fa38728d4dbd02b53de545323aeff88cedc7bf118ac30775d0464fb1868774f8dee3c22b4f25 launchers/ tfc-qubes-receiver
    compare_digest 0a232912d4de9f5b8a3bee67a853e3affbcd7182ee5e57dc24926b6abd10582ef0de7311efbbc75d56dc8fde8abf07bb3cb874e0f7814c1f92fdbda2712de0f9 launchers/ tfc-qubes-relay
    compare_digest 2e2505f1a381add4e9126aa621a1e659265c94c2a4d9ca34ce823e5cbaf2833e1f54ae2f46100cad10cc090ad4afd748addd3b31e269d4c81a3266db9d441eb0 launchers/ tfc-qubes-transmitter
    compare_digest cfcece32dc88a10bac617e6a4ce240004f49705ed3d74874cfbc50f90693ec2a26cf76ddb2793ca9ea68d91661de10a763cdd64e76f89a488b4077b337219bf3 launchers/ TFC-RP.desktop
    compare_digest f15a5d051bc11dea4b1b8e2d1e519bb60b59eada0a865df0c5c96615aaa2a691772bfde4c622f079992c91284d3c37698c50be32171d37d74dcb00a661546eaa launchers/ TFC-RP-Qubes.desktop
    compare_digest 20ff5c53d5b36497d0548c0de3c85592a8965002ce2aa5969dbd6c652691a60e97614313c18c43ff47aef8a58c3a1c4f488aede2044fc89b66fa5b4d268030fd launchers/ TFC-RP-Tails.desktop
    compare_digest 62dee853ef9d890b822cdc0dc93edee3251b32ca252be6f0d9b20a1f2b723abbb5e9675015eebd2ad812735bc294da80f7e37428f2bc95b51f7e11f5d18354e7 launchers/ TFC-RxP.desktop
    compare_digest c26456630008eb6a996f5f4abcb08e90189eb5602804af50799ff40d467ffdadb30ce13d411f424710a0454e73ad6203d4c62b4dc30e54a27e58358ff57d0ac6 launchers/ TFC-RxP-Qubes.desktop
    compare_digest f40be00343c235575ae3591b186e21f65d8ee516ab8599dc6575e568b5de93408c0c06fc10c0566ca4d4794bbdf263c8a137bb5a283e9597c0523ecbc183ed80 launchers/ TFC-TxP.desktop
    compare_digest 94c3a423694891066e45c8a69768a9af7ed31bdd60206381052807f36e138a93a4267fb2d0a2a86a5a9a4362a73e9733233444c424e89631f8213b2f95e0f60c launchers/ TFC-TxP-Qubes.desktop

    compare_digest f3f48b48c6f401e57fcad1471c05c5ac34f66a8cdc3654f334c60dd8038d985b08d751c3a70baa529172b3801e7b0a73166b1a6b535bfc8c5da1b32f6d375e97 qubes/ service.sh
    compare_digest 1e1b034ffe6a65a2a65c9d36b393d40423d8dd4189c9a85eff84f4d27e5310679d07192ce44a61d33918c93e876be01a410d083e9a799bdb1d7c4551807c1e82 qubes/ writer.py

    compare_digest 95993945b4254553725d05dfd5da5b37acf0ec658e9d6b66e95c1265f6e08691545af595b2e75a1fca1be2ac54ea91fe95112d0c29cabaf347f0383c1598dccd src/ __init__.py
    compare_digest 95993945b4254553725d05dfd5da5b37acf0ec658e9d6b66e95c1265f6e08691545af595b2e75a1fca1be2ac54ea91fe95112d0c29cabaf347f0383c1598dccd src/common/ __init__.py
    compare_digest e00ba1f9bc12dd0a7733c4d94a1079111f7096c0a542a4d892c0e5fd52ee223845ebbd51c36c1afd76bf3939dbdf4b383d1a8dfd07f52e0d7ee8ce300abf2f0c src/common/ crypto.py
    compare_digest 4859b458ad96b946626523f234fbf1486c4b47f70e504280dd045e96bb509a2c239724716e110ccb56d38b8270e3f6afd0e34bba669865b9b23c987665c01add src/common/ database.py
    compare_digest 92bad70cb8f907d9107cb7cece117c4387dbb6c879c879f0311d475c437094088cae3f54447c31ca16fdd54ab9ec7fcb8607c54e5f50630e398b944e7a343262 src/common/ db_contacts.py
    compare_digest 93bb40019edb563a69f564872df4e80b571b1bc206994097482727ebef1d71401f028ad6ac6ab6843e5f6e065165a051449595acd36b6b3c8934ac75fcb56e4f src/common/ db_groups.py
    compare_digest b03b80d5f7a88896b6644354916edcb9f0a1cd3c0be12278e79d96ce36d0c90f5ce509ee1a3ddd90741aa0b2f8da4a80e1b7dd134151ca2b82f73eae5c726d83 src/common/ db_keys.py
    compare_digest 3ca8098d191af07daaa5dd74997f6202c22411f361e803d896db9de392d14d20a2e2705a90ce3f14c01efdc8c3596015643f95b3f8f3661cdda74f7118dbf54a src/common/ db_logs.py
    compare_digest 4ec996462231091054173382e8c9682e62b4b9bfba9c57c32237ea713f1fe3083accbac427acfc48c07a1f34d8fe4db94d33ceb08be873deedb3a66f72bd40eb src/common/ db_masterkey.py
    compare_digest 168d8f41a09c4401b32a49aebb4f84c4672580c53ec9873a566a933198d471ddcc03ad7d427868380d2f949b4bf7cacc9e7b88891a1634be4ced2675a0030464 src/common/ db_onion.py
    compare_digest 0db5a52a8d5ebcfcd29f58f68371a32a886822ea51a37da946ff28fe3e158284f1c8ebcc95efccf61aa6eda46044b60684fe346c4c9c3fce35c75503c0f643bc src/common/ db_settings.py
    compare_digest 087c1f8aefaa0d94703f5e93bd3aa1987bef47f28e0c23b5df306ecd8826827f65020c13ac4736244a60c3a6670ab075df49ce31738f52f2f78b10414fa2244d src/common/ encoding.py
    compare_digest acfb868e6d42b7d5bd9b39d26f31536f80a5d2e83bf15c468e890960fe6582cbd9a58c007d4a006d6b6f8c9befcb19b42014dfecf55776379f68cafce7275965 src/common/ exceptions.py
    compare_digest 6b6228a211157c70b26b3bafdb0e79a5928d6fb20fdabac82865120144dfbce1c0c0320c251be691e79e366e4dd600111c8a246a9f55f5c3e4bd6a6d59ae9bb3 src/common/ gateway.py
    compare_digest af98163e8d21706a64417f4ae810476cdeffd5a74f4e84d234b23c8cf0281247213bcf253d7668f22d3ab1407c66b2a3907a9ebc0fe6027f684c71a9ebaca433 src/common/ input.py
    compare_digest 3a08b0cf1d7fe971717be752bbf8a3c63ab8ca46e489f2a0639056a47896ab47d47b912da44d91637d5258b8cccccdb50c361eee604b7a7d0260d0795bf05cc1 src/common/ misc.py
    compare_digest 4aac2ecbcbafd7efe87417e27e252beecee01c3ea00cc5721c34c1606efe0924e48ec8dc654ef09b7e94620291b793323cc9f32a961fa77c9b7cc116d4413a3d src/common/ output.py
    compare_digest d24053669a152dbc30c9896a30dea75d65bd64324cdacc9d00e8b4cc174bf7267f1706b1d50868d54dd100765f5545cd96967c22c98434cc51b3705d92e49170 src/common/ path.py
    compare_digest 333e495c3f3a7b8b9c4a30a1a81feceb77198b6b6afcc2ea523611e0c776d1b5bacccedec806ef78f1088d855168248df6278907bc97a5ad2f3dc84af845509e src/common/ reed_solomon.py
    compare_digest 5e0c1a73b85e742e8246785da22175bb32d6ec30d08017455d3a1e7d6a1cc91456e8d63b34268eda2669ac989c1afe3fcc968409ecba614e83ce310ff385c9d2 src/common/ statics.py
    compare_digest e4bc967c49871a5660e34c8633a5e97e3d71aa87dc93e58c1451be78c67e876e2fc3f2ac056a7f7fec3f9ff348faf2384490593c8514ad4b157d5a4444c745d2 src/common/ word_list.py

    compare_digest 95993945b4254553725d05dfd5da5b37acf0ec658e9d6b66e95c1265f6e08691545af595b2e75a1fca1be2ac54ea91fe95112d0c29cabaf347f0383c1598dccd src/receiver/ __init__.py
    compare_digest 0f1a8ef05973e8ce15c7b1be47371377de3c6e9d1600466ef22208194ed4fdac17c725c4473df017fa17b8e5b5e58acd16baffc15537330d86524e079a4a4613 src/receiver/ commands.py
    compare_digest 1ecbc202400f6fcd04e4e9bdbf5adff54f1af637d7be59b102a11f9f33fdd65cade70c50cf4cbbfab14d4e6b19bdd5dfb6fa686a3d26b1d9d2a8d922435c6f77 src/receiver/ commands_g.py
    compare_digest 0705fda0752a3e9b45d217435885a061eda89adba2c41b9c96d7c10c106cc98434c1c2c43f3af45f64068b6a71973d47ffe4b6fe781ceb4a19af9fb59297a7b3 src/receiver/ files.py
    compare_digest 7fb2390a138fea3d503da585cf2202607a41787f2ce5a32ba849d4a86186fa8620b3e5f59cc0c7b6bb0290dcadd59ce8019eb91bb8840334b09a4bb2d263c109 src/receiver/ key_exchanges.py
    compare_digest 9a074ffa89f7e0d5045c4c5d7aaa8686206eb1d6c9769bbb32236e4d2af5f331115f7726a85952989944a768dfdf49035b6aa2d83ff1896682a855b70a4e337f src/receiver/ messages.py
    compare_digest ba31bdfe60ec50c0adc7fd06d960989ed73c3d2c02a3f4a96a0271a0fe9944758bf77ba83bf34e64baa6a05d40b6f2e0b17d9dfebe2766cd094b0fad80cc0714 src/receiver/ output_loop.py
    compare_digest 3633f7b783bc6a159c34e82818a0c10d0583071e8c7bc10a3416319e347b7328057387000c0701a889e7c1d98df50f8cb62e05a93a15c916bfa48a60909246c9 src/receiver/ packet.py
    compare_digest 9be3df08046fa6c5cbca070a78cf425bb60eb0270df75cfb122f786ad4eb398c563e5b5d40fb7be9a392443ec1bdccfbc754d9313cfed73136f4e8d77d4fc3e1 src/receiver/ receiver_loop.py
    compare_digest e4346cd4918618bb06c8a3416b7ba9f82f16bed8372c85f96a9669108677570daf36dcc6121543e8d83e336cdaedcd31f15065a68bd2af0b434f0cb263c61b20 src/receiver/ windows.py

    compare_digest 95993945b4254553725d05dfd5da5b37acf0ec658e9d6b66e95c1265f6e08691545af595b2e75a1fca1be2ac54ea91fe95112d0c29cabaf347f0383c1598dccd src/relay/ __init__.py
    compare_digest fc8eb29a84145202ae53f2814e528f57bef250d2f097fbc555da08c8435e556c524cf1892c35d66888d0c18d135371e450991adbc0885bf28c60c3f35224fb3e src/relay/ client.py
    compare_digest 271ae263192ba3408c67dce12c87333c84cad23e6753111566485d1f024cf532990ebabec6188027e26dbddbd67436aa82fc3f29ecb219b60a79ecde2b6c15fc src/relay/ commands.py
    compare_digest fe1cdfad24c34ce27e36784421a71de301cd259864169ecfde95ef30af29817ae805ee6aac4078cd1577f5651330712df1294c69096c1a804845cd5882591604 src/relay/ diffs.py
    compare_digest 1b6bcd4d0d7f4cd8b15b85f35eee034d6246bcd98f61366acb02b5c6225d3ef504b7bead03d8d78a7b3b76bbe212e02f4d3b3c1268eb4f1efa76e41ec6cc73c9 src/relay/ onion.py
    compare_digest 22b9f88ae8e35adb421eb19cea6e39dc2897aea4557fe75abd2715d807e89297de670825471c17c70afbc2f6c3b404fb5304a201cca27b65cd13f2f088acfeb4 src/relay/ server.py
    compare_digest b8162085f25ab2de3f2de84bf20c4b67eda829d397650e7495b05671d1bab53b472fdb25f23dcedaab2376c80dd108763be287d57eea67ebca869dec75e0e8ea src/relay/ tcb.py

    compare_digest 95993945b4254553725d05dfd5da5b37acf0ec658e9d6b66e95c1265f6e08691545af595b2e75a1fca1be2ac54ea91fe95112d0c29cabaf347f0383c1598dccd src/transmitter/ __init__.py
    compare_digest 79e791745e7af043e0011cff7fc868c0373b1cb5b66a28c4c61504d5e80245b0627d4ce9f9f8c6ab547e6ad22ab86a03c68e6b1a8ce57d66cdc0b6e6610c6205 src/transmitter/ commands.py
    compare_digest 1c8d0647596af5fed96caaaa701d7ab3101ae8d1e4696e14e57884c7ed26c596de09bd768a297b83db17778ff7f29e38fe545593a63af3d7dea31ce8eec4b3dc src/transmitter/ commands_g.py
    compare_digest 45f4a77376f06338b4fa3514aff41337633358fe65efc7220bb0cc00125049deae0b5ec5ee33b1ce367092915687ad2d094090b9afe70f09600be28a7a9703f1 src/transmitter/ contact.py
    compare_digest 39726a8e3a8e579484c7ac142245af829e6fcafc8639a421c5fb0e3b62c7479911179ca65ef988f7425b91ff0321f1f444f8cc6fa47444091e85884064c3fd7b src/transmitter/ files.py
    compare_digest 7876bbbda597f541a7f7b7f6489a45edf8b60bd3e7b7c0d91c024d911fbdd633f0541d5b1c48814a43957efba9955c1667d5311258c8065fb566274b8655fd93 src/transmitter/ input_loop.py
    compare_digest 2daa66c71e781166499307d63d5f5967112a8788a2aae367c09a8b256f6db3e3c4c55e750dd7c902ff65ebf7b5dcdc4c36993fe4c40bdc2dca765387c94f0676 src/transmitter/ key_exchanges.py
    compare_digest 8ea47fb7825b8ec988a38ef0e26da37e622b3489c3f2cc2e60ac1e7cd2258c1bca578eaf917aacb9301c8a2d2d81016f9420967db50bf44d3eb5087ea03cf157 src/transmitter/ packet.py
    compare_digest 369cd62ee0295791d75b683317fe9f8c312a35c28f50aa48530c77251f1fd1761a783d719aaa4611be19957f86c36fd4dde5394fafd3623dae31398179a4438a src/transmitter/ sender_loop.py
    compare_digest 896a364faa65425dbe0f1a2e4670742ed63cc0d053e8ced4d47fc67ba1e03f9fae707f0f0ac24f47c931b12dc81e8fbdbb306b2175d7a5a1e4f3ffee79c90cc1 src/transmitter/ traffic_masking.py
    compare_digest 76f187d9f870dcdfb42d0b226c4737efdcf7f0f5b9dffc2f9b760078f39d333c7e40ac080628b10525dc3e222b165b5aea670060864adfa24eb2202bb7263ef1 src/transmitter/ user_input.py
    compare_digest fbb6513fb8863e68d3442f4dc63b3c3e97fd1ab1ba44320d3d5b9093e0385a96c923d5909a1f33e2d91aeeb2e10863ed258e304e1d6082104b472930f10d3360 src/transmitter/ window_mock.py
    compare_digest 61527e42b96a78e47b3b2552f6086f4c8bbdfdad2f32163ac8d21a69f13e0db5169b4dba4498a1d2b745b70386c699c2e938e6f1e90acd92f9a425f2a208a5ab src/transmitter/ windows.py
}


# ----------------------------------------------------------------------------------------
# Printing utilities

function c_echo {
    # Justify printed text to the center of the terminal.
    printf "%*s\n" "$(( ( $(echo "${1}" | wc -c) + 80 ) / 2 ))" "${1}"
}


function exit_with_message {
    # Print error message and exit the installer with flag 1.
    clear
    echo ''
    c_echo "Error: $* Exiting." 1>&2
    echo ''
    exit 1
}


function install_complete {
    # Notify the user that the installation is complete.
    clear
    c_echo ''
    c_echo "$*"
    c_echo ''
    c_echo "Press any key to close the installer."
    read -r -n 1 -s -p ''
    echo ''

    kill -9 $PPID
}


function install_complete_qubes {
    # Notify the user that the installation for Qubes VM is complete.
    clear
    c_echo ''
    c_echo "Installation of TFC on this Qube is now complete."
    c_echo ''
    c_echo "Press any key to close the installer."
    read -r -n 1 -s -p ''
    clear

    kill -9 $PPID
}


# ----------------------------------------------------------------------------------------
# Installation utilities

function t_sudo {
    # Execute command as root on Tails.
    echo "${sudo_pwd}" | sudo -S "${@}"
}


function check_rm_existing_installation {
    # Remove TFC installation directory if TFC is already installed.
    if [[ -d "${INSTALL_DIR}" ]]; then
        if [[ ${sudo_pwd} ]]; then
            t_sudo rm -r ${INSTALL_DIR}  # Tails
        else
            sudo rm -r ${INSTALL_DIR}    # Debian etc.
        fi
    fi
}


function dpkg_check {
    # Check if the software manager is busy, and if, wait until it completes.
    i=0
    tput sc
    while sudo fuser /var/lib/dpkg/lock >/dev/null 2>&1 ; do
        case $((i % 4)) in
            0 ) j="." ;;
            1 ) j="o" ;;
            2 ) j="O" ;;
            3 ) j="o" ;;
        esac
        tput rc
        echo -en "\rWaiting for other software managers to finish..$j"
        sleep 0.5
        ((i=i+1))
    done
    echo ''
}


function steps_before_network_kill {
    # These steps are identical in TCB/Relay/Local test configurations.
    # This makes it harder to distinguish from network traffic when the
    # user is installing TFC for Source or Destination Computer: By the
    # time `kill_network` is run, it's too late to compromise the TCB.
    # Hopefully this forces adversaries to attempt compromise of more
    # endpoints during installation, which increases their chances of
    # getting caught.
    dpkg_check
    check_rm_existing_installation

    wait_for_tor
    sudo torsocks apt update
    sudo torsocks apt install git gnome-terminal libssl-dev python3-pip python3-tk net-tools -y
    sudo torsocks git clone --depth 1 https://github.com/maqp/tfc.git ${INSTALL_DIR}

    verify_tcb_requirements_files
    sudo torsocks python3 -m pip install  -r "${INSTALL_DIR}/requirements-pre.txt"  --require-hashes --no-deps --no-cache-dir
    sudo torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements-venv.txt" --require-hashes --no-deps --no-cache-dir -d ${INSTALL_DIR}/
    sudo torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements.txt"      --require-hashes --no-deps --no-cache-dir -d ${INSTALL_DIR}/
}


function verify_packages() {
    # Verify authenticity of downloaded dependency file.
    dependency_list=("$@")
    for dependency in "${dependency_list[@]}"; do

        dep_file_name=$(ls "${HOME}/" | grep "^${dependency}")

        # Move the dependency to root controlled dir
        if [[ ${sudo_pwd} ]]; then
            t_sudo mv "${HOME}/${dep_file_name}" "${INSTALL_DIR}/${dep_file_name}"  # Tails
            t_sudo chown root                    "${INSTALL_DIR}/${dep_file_name}"
        else
            sudo mv "${HOME}/${dep_file_name}" "${INSTALL_DIR}/${dep_file_name}"    # Debian etc.
            sudo chown root                    "${INSTALL_DIR}/${dep_file_name}"
        fi

        # Calculate the purported hash from the downloaded file
        purp_hash=$(sha512sum "${INSTALL_DIR}/${dep_file_name}" | awk '{print $1}')

        # Load pinned hash from the hashmap based on filename
        pinned_hash=${dependency_hashes[${dep_file_name}]}

        # Compare the purported hash to the pinned hash
        if echo "${purp_hash}" | cmp -s <(echo "$pinned_hash"); then
            echo "OK - Pinned SHA512 hash matched file ${dep_file_name}"
        else
            echo "Error: ${dep_file_name} had an invalid SHA512 hash:"
            echo "${purp_hash}"
            echo "Expected following hash:"
            echo "${pinned_hash}"
            exit 1
        fi

    done
}


function install_packages_as_root() {
    # Install list of verified packages
    dependency_list=("$@")
    for dependency in "${dependency_list[@]}"; do

        # Find file that starts with the dependency name
        dep_file_name=$(ls "${INSTALL_DIR}" | grep "^${dependency}")

        # Install the dependency
        if [[ ${sudo_pwd} ]]; then
            t_sudo python3 -m pip install "${INSTALL_DIR}/${dep_file_name}" --no-deps  # Tails
        else
            sudo python3 -m pip install "${INSTALL_DIR}/${dep_file_name}" --no-deps    # Debian etc.
        fi

    done
}

function install_to_venv() {
    # Install list of verified packages to virtualenv
    dependency_list=("$@")
    for dependency in "${dependency_list[@]}"; do

        # Find file that starts with the dependency name
        dep_file_name=$(ls "${INSTALL_DIR}" | grep "^${dependency}")

        # Install the dependency to virtualenv
        if [[ ${sudo_pwd} ]]; then
            t_sudo "${INSTALL_DIR}/${VENV_NAME}/bin/pip3" install "${INSTALL_DIR}/${dep_file_name}" --no-deps  # Tails
        else
            sudo "${INSTALL_DIR}/${VENV_NAME}/bin/pip3" install "${INSTALL_DIR}/${dep_file_name}" --no-deps    # Debian etc.
        fi

    done
}


function remove_packages() {
    # Remove the dependency installation files.
    dependency_list=("$@")
    for dependency in "${dependency_list[@]}"; do

        # Find file that starts with the dependency name
        dep_file_name=$(ls "${INSTALL_DIR}" | grep "^${dependency}")

        # Delete the file
        if [[ ${sudo_pwd} ]]; then
            t_sudo -E rm -f "${INSTALL_DIR}/${dep_file_name}"  # Tails
        else
            sudo -E rm -f "${INSTALL_DIR}/${dep_file_name}"    # Debian etc.
        fi

    done
}


function remove_common_files {
    # Remove files that become unnecessary after installation.
    $1 rm -r ${INSTALL_DIR}/.git/
    $1 rm -r ${INSTALL_DIR}/.github/
    $1 rm -r ${INSTALL_DIR}/launchers/
    $1 rm -r ${INSTALL_DIR}/tests/
    $1 rm    ${INSTALL_DIR}/.coveragerc
    $1 rm    ${INSTALL_DIR}/install.sh
    $1 rm    ${INSTALL_DIR}/install.sh.asc
    $1 rm    ${INSTALL_DIR}/pubkey.asc
    $1 rm    ${INSTALL_DIR}/README.md
    $1 rm    ${INSTALL_DIR}/requirements.txt
    $1 rm    ${INSTALL_DIR}/requirements-dev.txt
    $1 rm    ${INSTALL_DIR}/requirements-relay.txt
    $1 rm    ${INSTALL_DIR}/requirements-relay-tails.txt
    $1 rm    ${INSTALL_DIR}/requirements-pre.txt
    $1 rm    ${INSTALL_DIR}/requirements-venv.txt
    $1 rm -f /opt/install.sh
    $1 rm -f /opt/install.sh.asc
    $1 rm -f /opt/pubkey.asc
}


function install_virtualenv {
    # Some distros want virtualenv installed as sudo and other don't.
    # Install as both users to improve the chances of compatibility.
    sudo torsocks python3 -m pip install -r ${INSTALL_DIR}/requirements-venv.txt --require-hashes --no-deps
    torsocks      python3 -m pip install -r ${INSTALL_DIR}/requirements-venv.txt --require-hashes --no-deps
}


function kill_network {
    # Kill network interfaces to protect the TCB from remote compromise.
    for interface in /sys/class/net/*; do
        name=$(basename "${interface}")
        if [[ ${name} != "lo" ]]; then
            echo "Disabling network interface ${name}"
            sudo ifconfig "${name}" down
        fi
    done

    sleep 1
    clear
    c_echo ''
    c_echo " This computer needs to be air gapped. The installer has "
    c_echo "disabled network interfaces as the first line of defense."
    c_echo ''
    c_echo "Disconnect the Ethernet cable and press any key to continue."
    read -r -n 1 -s -p ''
    echo -e '\n'
}


function add_serial_permissions {
    # Enable serial interface for user-level programs.
    clear
    c_echo ''
    c_echo "Setting serial permissions. If available, please connect the"
    c_echo "USB-to-serial/TTL adapter now and press any key to continue."
    read -r -n 1 -s -p ''
    echo -e '\n'
    sleep 3  # Wait for USB serial interfaces to register

    # Add user to the dialout group to allow serial access after reboot
    sudo adduser "${USER}" dialout

    # Add temporary permissions for serial interfaces until reboot
    mapfile -t arr < <(ls /sys/class/tty | grep USB) || true
    for i in "${arr[@]}"; do
        sudo chmod 666 "/dev/${i}"
    done

    if [[ -e /dev/ttyS0 ]]; then
        sudo chmod 666 "/dev/ttyS0"
    fi
}


function create_user_data_dir {
    # Backup TFC user data directory if it exists and has files in it.
    if [[ -d "$HOME/tfc" ]]; then
        if [[ -n "$(ls -A "${HOME}/tfc/")" ]]; then
            mv "${HOME}/tfc" "${HOME}/tfc_userdata_backup_at_$(date +%Y-%m-%d_%H-%M-%S)"
        fi
    fi
    mkdir -p "${HOME}/tfc" 2>/dev/null
}


function get_screen_width {
    # Output the width of the screen resolution.
    xdpyinfo | grep dimensions | sed -r 's/^[^0-9]*([0-9]+).*$/\1/'
}


function modify_terminator_font_size {
    # Adjust terminator font size for tiling terminal emulator configurations.
    #
    # The default font sizes in terminator config file are for 1920px
    # wide screens. The lowest resolution (width) supported is 1366px.
    width=$(get_screen_width)

    if (( width < 1600 )); then
        $1 sed -i -e 's/font                = Monospace 11/font                = Monospace 8/g'     "${2}"  # Normal config
        $1 sed -i -e 's/font                = Monospace 10.5/font                = Monospace 7/g'   "${2}"  # Data diode config
    elif (( width < 1920 )); then
        $1 sed -i -e 's/font                = Monospace 11/font                = Monospace 9/g'     "${2}"  # Normal config
        $1 sed -i -e 's/font                = Monospace 10.5/font                = Monospace 8.5/g' "${2}"  # Data diode config
    fi
}


# Installation configurations for Debian/PureOS/Ubuntu/LMDE
# ----------------------------------------------------------------------------------------

function install_tcb {
    # Install TFC for Source/Destination Computer.
    steps_before_network_kill
    kill_network

    verify_files
    create_user_data_dir

    VENV_NAME="venv_tcb"

    install_packages_as_root "${virtualenv_packages[@]}"
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv "${INSTALL_DIR}/${VENV_NAME}" --system-site-packages --never-download --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    install_to_venv "${tcb_packages[@]}"
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                   /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-TxP.desktop /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/TFC-RxP.desktop /usr/share/applications/

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/relay/"
    sudo rm -r "${INSTALL_DIR}/qubes/"
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/relay.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    add_serial_permissions

    install_complete "Installation of TFC on this device is now complete."
}


function install_relay {
    # Install TFC Relay configuration on Networked Computer.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_relay"

    install_virtualenv
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv ${INSTALL_DIR}/${VENV_NAME} --system-site-packages --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    sudo torsocks ${INSTALL_DIR}/${VENV_NAME}/bin/pip3 install -r ${INSTALL_DIR}/requirements-relay.txt --require-hashes --no-deps
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                  /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-RP.desktop /usr/share/applications/

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/receiver/"
    sudo rm -r "${INSTALL_DIR}/src/transmitter/"
    sudo rm -r "${INSTALL_DIR}/qubes/"
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/tfc.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    add_serial_permissions

    install_complete "Installation of the TFC Relay configuration is now complete."
}


# ----------------------------------------------------------------------------------------
# Installation configuration for Tails

function read_sudo_pwd {
    # Cache the sudo password so that Debian doesn't keep asking
    # for it during the installation (it won't be stored on disk).
    read -r -s -p "[sudo] password for ${USER}: " sudo_pwd
    until (t_sudo echo '' 2>/dev/null)
    do
        echo -e '\nSorry, try again.'
        read -r -s -p "[sudo] password for ${USER}: " sudo_pwd
    done
    echo
}


function install_relay_tails {
    # Install TFC Relay configuration on Networked Computer
    # running Tails live distro (https://tails.boum.org/).
    read_sudo_pwd

    t_sudo apt update
    t_sudo apt install libssl-dev python3-pip python3-tk -y || true  # Ignore error in case packets can not be persistently installed

    create_user_data_dir

    VENV_NAME="venv_relay"

    torsocks git clone --depth 1 https://github.com/maqp/tfc.git "${HOME}/tfc"
    t_sudo mv "${HOME}/tfc/" "${INSTALL_DIR}/"
    t_sudo chown -R root ${INSTALL_DIR}/

    verify_tcb_requirements_files
    verify_files

    # Tails doesn't allow downloading over PIP to /opt/tfc, so we first download
    # to $HOME, move the files to /opt/tfc, and then perform the hash verification

    # Install prerequisites before downloading other packages: This ensures pip accepts manylinux2014 wheels
    torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements-pre.txt"   --require-hashes --no-deps --no-cache-dir -d "${HOME}/"
    verify_packages "${pre_packages[@]}"
    install_packages_as_root "${pre_packages[@]}"

    torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements-venv.txt"        --require-hashes --no-deps --no-cache-dir -d "${HOME}/"
    torsocks python3 -m pip download -r "${INSTALL_DIR}/requirements-relay-tails.txt" --require-hashes --no-deps --no-cache-dir -d "${HOME}/"

    verify_packages "${virtualenv_packages[@]}"
    verify_packages "${tails_packages[@]}"

    install_packages_as_root "${virtualenv_packages[@]}"

    # Install Relay Program dependencies to virtualenv
    t_sudo python3 -m virtualenv ${INSTALL_DIR}/${VENV_NAME} --system-site-packages --always-copy
    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    install_to_venv "${tails_packages[@]}"
    deactivate

    t_sudo mv ${INSTALL_DIR}/tfc.png                        /usr/share/pixmaps/
    t_sudo mv ${INSTALL_DIR}/launchers/TFC-RP-Tails.desktop /usr/share/applications/
    t_sudo mv ${INSTALL_DIR}/tfc.yml                        /etc/onion-grater.d/

    # Remove unnecessary files
    remove_packages "${pre_packages[@]}"
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tails_packages[@]}"
    remove_common_files "t_sudo"
    t_sudo rm -r "${INSTALL_DIR}/src/receiver/"
    t_sudo rm -r "${INSTALL_DIR}/src/transmitter/"
    t_sudo rm -r "${INSTALL_DIR}/qubes/"
    t_sudo rm    "${INSTALL_DIR}/dd.py"
    t_sudo rm    "${INSTALL_DIR}/tfc.py"

    install_complete "Installation of the TFC Relay configuration is now complete."
}


# ----------------------------------------------------------------------------------------
# Installation configurations for Qubes OS (https://www.qubes-os.org/)

function install_qubes_src {
    # Qubes Source VM installation configuration for Debian 10 domains.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_tcb"

    install_packages_as_root "${virtualenv_packages[@]}"
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv "${INSTALL_DIR}/${VENV_NAME}" --system-site-packages --never-download --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    install_to_venv "${tcb_packages[@]}"
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                         /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-TxP-Qubes.desktop /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/tfc-qubes-transmitter /usr/bin/tfc-transmitter

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/relay/"
    sudo rm -r "${INSTALL_DIR}/qubes/"  # Listening service only needed on NET/DST
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/relay.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    install_complete_qubes
}


function install_qubes_dst {
    # Qubes Destination VM installation configuration for Debian 10 domains.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_tcb"

    # Configure listening service for qrexec RPC
    sudo ln -sf /opt/tfc/qubes/service.sh /etc/qubes-rpc/tfc.NetworkerDestination
    sudo chmod a+x /opt/tfc/qubes/writer.py
    sudo chmod a+x /opt/tfc/qubes/service.sh

    install_packages_as_root "${virtualenv_packages[@]}"
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv "${INSTALL_DIR}/${VENV_NAME}" --system-site-packages --never-download --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    install_to_venv "${tcb_packages[@]}"
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                         /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-RxP-Qubes.desktop /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/tfc-qubes-receiver    /usr/bin/tfc-receiver

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/relay/"
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/relay.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    install_complete_qubes
}


function install_qubes_net {
    # Qubes Networked VM installation configuration for Debian 10 domains.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_relay"

    # Configure listening service for qrexec RPC
    sudo ln -sf /opt/tfc/qubes/service.sh /etc/qubes-rpc/tfc.SourceNetworker
    sudo chmod a+x /opt/tfc/qubes/writer.py
    sudo chmod a+x /opt/tfc/qubes/service.sh

    install_packages_as_root "${virtualenv_packages[@]}"
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv ${INSTALL_DIR}/${VENV_NAME} --system-site-packages --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    sudo torsocks ${INSTALL_DIR}/${VENV_NAME}/bin/pip3 install -r ${INSTALL_DIR}/requirements-relay.txt --require-hashes --no-deps
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                        /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-RP-Qubes.desktop /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/tfc-qubes-relay      /usr/bin/tfc-relay

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/src/receiver/"
    sudo rm -r "${INSTALL_DIR}/src/transmitter/"
    sudo rm    "${INSTALL_DIR}/dd.py"
    sudo rm    "${INSTALL_DIR}/tfc.py"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    install_complete_qubes
}


# ----------------------------------------------------------------------------------------
# Tiling terminal emulator configurations for single OS

function install_local_test {
    # Install TFC for local testing on a single computer.
    steps_before_network_kill

    verify_files
    create_user_data_dir

    VENV_NAME="venv_tfc"

    sudo torsocks apt install terminator -y

    install_virtualenv
    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    sudo -E python3 -m virtualenv ${INSTALL_DIR}/${VENV_NAME} --system-site-packages --always-copy

    . ${INSTALL_DIR}/${VENV_NAME}/bin/activate
    sudo torsocks ${INSTALL_DIR}/${VENV_NAME}/bin/pip3 install -r ${INSTALL_DIR}/requirements.txt       --require-hashes --no-deps
    sudo torsocks ${INSTALL_DIR}/${VENV_NAME}/bin/pip3 install -r ${INSTALL_DIR}/requirements-relay.txt --require-hashes --no-deps
    deactivate

    sudo mv ${INSTALL_DIR}/tfc.png                                /usr/share/pixmaps/
    sudo mv ${INSTALL_DIR}/launchers/TFC-Local-test.desktop       /usr/share/applications/
    sudo mv ${INSTALL_DIR}/launchers/terminator-config-local-test ${INSTALL_DIR}/
    modify_terminator_font_size "sudo" "${INSTALL_DIR}/terminator-config-local-test"

    # Remove unnecessary files
    remove_packages "${virtualenv_packages[@]}"
    remove_packages "${tcb_packages[@]}"
    remove_common_files "sudo"
    sudo rm -r "${INSTALL_DIR}/qubes/"
    sudo rm    "${INSTALL_DIR}/tfc.yml"

    install_complete "Installation of TFC for local testing is now complete."
}


function install_developer {
    # Install TFC development configuration.
    #
    # This configuration will install TFC into `$HOME/tfc/`. This allows
    # you (the user) to easily make edits to the source between runs.
    # Note that it also means, that any malicious program with
    # user-level privileges is also able to modify the source files. For
    # more secure use on a single computer, select the local testing
    # install configuration, or preferably use the Qubes configuration.
    dpkg_check

    wait_for_tor
    create_user_data_dir

    VENV_NAME="venv_tfc"

    sudo torsocks apt update
    sudo torsocks apt install git libssl-dev python3-pip python3-tk terminator -y

    torsocks git clone https://github.com/maqp/tfc.git "${HOME}/tfc"

    torsocks python3 -m pip install -r "${HOME}/tfc/requirements-venv.txt" --require-hashes --no-deps

    export DEB_PYTHON_INSTALL_LAYOUT='deb'
    python3 -m virtualenv "${HOME}/tfc/${VENV_NAME}" --system-site-packages --always-copy

    . "${HOME}/tfc/${VENV_NAME}/bin/activate"
    torsocks "${HOME}/tfc/${VENV_NAME}/bin/pip3" install -r "${HOME}/tfc/requirements-dev.txt"
    deactivate

    sudo cp "${HOME}/tfc/tfc.png"                   "/usr/share/pixmaps/"
    sudo cp "${HOME}/tfc/launchers/TFC-Dev.desktop" "/usr/share/applications/"
    sudo sed -i "s|\$HOME|${HOME}|g"                "/usr/share/applications/TFC-Dev.desktop"
    modify_terminator_font_size "" "${HOME}/tfc/launchers/terminator-config-dev"
    chmod a+rwx -R "${HOME}/tfc/"

    # Remove unnecessary files
    sudo rm -f "/opt/install.sh"
    sudo rm -f "/opt/install.sh.asc"
    sudo rm -f "/opt/pubkey.asc"

    add_serial_permissions

    install_complete "Installation of the TFC dev environment is now complete."
}


function arg_error {
    # Print help message if the user launches the
    # installer with missing or invalid argument.
    clear
    echo -e "\nUsage: bash install.sh [OPTION]\n"
    echo    "Mandatory arguments"
    echo    "  tcb      Install Transmitter/Receiver Program (Debian 11 / PureOS 10.0 / *buntu 22.04 / Pop!_OS 22.04 / LMDE 5 / Mint 21 / Zorin OS 16.1)"
    echo    "  relay    Install Relay Program                (Debian 11 / PureOS 10.0 / *buntu 22.04 / Pop!_OS 22.04 / LMDE 5 / Mint 21 / Zorin OS 16.1 / Tails 5.6)"
    echo -e "  local    Install insecure local testing mode  (Debian 11 / PureOS 10.0 / *buntu 22.04 / Pop!_OS 22.04 / LMDE 5 / Mint 21 / Zorin OS 16.1)\n"
    echo    "  qsrc     Install Transmitter Program          (Qubes 4.1.1)"
    echo    "  qdst     Install Receiver Program             (Qubes 4.1.1)"
    echo -e "  qnet     Install Relay Program                (Qubes 4.1.1)\n"
    exit 1
}


# ----------------------------------------------------------------------------------------
# Pre-install checks

function root_check {
    # Check that the installer was not launched as root.
    if [[ ! $EUID -ne 0 ]]; then
        exit_with_message "This installer must not be run as root."
    fi
}


function sudoer_check {
    # Check that the user who launched the installer is on the sudoers list.

    # Tails allows sudo without the user `amnesia` being on sudoers list.
    if ! lsb_release -a 2>/dev/null | grep -q Tails; then
        return
    fi

    sudoers=$(getent group sudo |cut -d: -f4 | tr "," "\n")
    user_is_sudoer=false

    for sudoer in ${sudoers}; do
        if [[ ${sudoer} == "${USER}" ]]; then
            user_is_sudoer=true
            break
        fi
    done

    if ! ${user_is_sudoer}; then
        exit_with_message "User ${USER} must be on the sudoers list."
    fi
}


function test_installer {
    # Test that the installer's hashes match the files.
    # Note: This function is only used as part of the release pipeline.
    INSTALL_DIR='.'
    verify_tcb_requirements_files
    verify_files
}


function wait_for_tor {
    # Wait until Torsocks connects properly to GitHub
    c_echo "Waiting for Tor..."
    until torsocks wget -T 10 -q https://raw.githubusercontent.com -O /dev/null; do
        sleep 1
    done
}


# ----------------------------------------------------------------------------------------
# Main routine

set -e
root_check
sudoer_check
sudo_pwd=''

case $1 in
    tcb    ) install_tcb;;
    relay  ) install_relay;;
    tails  ) install_relay_tails;;
    local  ) install_local_test;;
    qsrc   ) install_qubes_src;;
    qdst   ) install_qubes_dst;;
    qnet   ) install_qubes_net;;
    dev    ) install_developer;;
    test   ) test_installer;;
    *      ) arg_error;;
esac
